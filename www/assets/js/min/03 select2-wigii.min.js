$.fn.select2.amd.define("select2/data/wigiiMinimumInputLength",[],function(){function a(d,c,b){this.minimumInputLength=b.get("minimumInputLength");this.selectId=b.get("selectId");d.call(this,c,b)}a.prototype.query=function(c,d,e){d.term=d.term||"";d.term=d.term.trim();var b=$("#"+this.selectId).val();if(d.term.length==0&&!b){this.trigger("results:message",{message:"inputTooShort",args:{minimum:this.minimumInputLength,input:d.term,params:d}});return}else{if(d.term.length<this.minimumInputLength){d.blockAjax=true}}d.defaultOptions=[];$("#"+this.selectId+" option").each(function(g){var f=$(this);d.defaultOptions.push({id:f.attr("value"),text:f.text()})});c.call(this,d,e)};return a});$.fn.select2.amd.define("select2/data/wigiiAjaxAdapter",["select2/data/array","select2/utils","select2/data/wigiiMinimumInputLength",],function(d,c,a){function b(e,f){this.ajaxOptions=this._applyDefaults(f.get("ajax"));if(this.ajaxOptions.processResults!=null){this.processResults=this.ajaxOptions.processResults}b.__super__.constructor.call(this,e,f)}c.Extend(b,d);b.prototype._applyDefaults=function(e){var f={data:function(g){return $.extend({},g,{q:g.term})},transport:function(j,i,h){var g=$.ajax(j);g.then(i);g.fail(h);return g}};return $.extend({},f,e,true)};b.prototype.processResults=function(e){return e};b.prototype.query=function(f,k){var j=[];var m=this;if(f.blockAjax){if(f.defaultOptions){if(f.term!=""){var l=f.term.toUpperCase();for(var h=0;h<f.defaultOptions.length;h++){var e=f.defaultOptions[h];if(e.id==""){j.push(e)}else{if(e.id.toUpperCase().indexOf(l)>-1||e.text.toUpperCase().indexOf(l)>-1){j.push(e)}}}}else{j=f.defaultOptions}}k({results:j});return}if(this._request!=null){if($.isFunction(this._request.abort)){this._request.abort()}this._request=null}var n=$.extend({type:"GET",crossDomain:true,xhrFields:{withCredentials:true}},this.ajaxOptions);if(typeof n.url==="function"){n.url=n.url.call(this.$element,f)}if(typeof n.data==="function"){n.data=n.data.call(this.$element,f)}function g(){var i=n.transport(n,function(t){var r=m.processResults(t,f);if(f.defaultOptions){var s="";if(f.term!=""){s=f.term.toUpperCase()}var u=r.results;var o={};r.results=[];for(var q=0;q<f.defaultOptions.length;q++){var p=f.defaultOptions[q];if(p.id==""||p.id.toUpperCase().indexOf(s)>-1||p.text.toUpperCase().indexOf(s)>-1){r.results.push(p);o[p.id]=true}}for(var q=0;q<u.length;q++){var p=u[q];if(!o[p.id]){r.results.push(p);o[p.id]=true}}}if(m.options.get("debug")&&window.console&&console.error){if(!r||!r.results||!$.isArray(r.results)){console.error("Select2: The AJAX results did not return an array in the `results` key of the response.")}}k(r)},function(){if(i.status&&i.status==="0"){return}m.trigger("results:message",{message:"errorLoading"})});m._request=i}if(this.ajaxOptions.delay&&f.term!=null){if(this._queryTimeout){window.clearTimeout(this._queryTimeout)}this._queryTimeout=window.setTimeout(g,this.ajaxOptions.delay)}else{g()}};return c.Decorate(b,a)});