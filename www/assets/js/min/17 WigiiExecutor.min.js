/*!
 *  This file is part of Wigii (R) software.
 *  Wigii is developed to inspire humanity. To Humankind we offer Gracefulness, Righteousness and Goodness.
 *  
 *  Wigii is free software: you can redistribute it and/or modify it 
 *  under the terms of the GNU General Public License as published by
 *  the Free Software Foundation, either version 3 of the License, 
 *  or (at your option) any later version.
 *  
 *  Wigii is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; 
 *  without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  
 *  See the GNU General Public License for more details.
 *
 *  A copy of the GNU General Public License is available in the Readme folder of the source code.  
 *  If not, see <http://www.gnu.org/licenses/>.
 *
 *  @copyright  Copyright (c) 2016  Wigii.org
 *  @author     <http://www.wigii.org/system>      Wigii.org 
 *  @link       <http://www.wigii-system.net>      <https://github.com/wigii/wigii>   Source Code
 *  @license    <http://www.gnu.org/licenses/>     GNU General Public License
 */
function printObj(b){var a=[];$.each(b,function(d,g){var e=d+": ";e+=$.isPlainObject(g)?printObj(g):g;a.push(e)});return"{ "+a.join(", ")+" }"}crtElementId=null;crtElementType="element";crtRoleId=null;crtContextId=0;crtWigiiNamespaceUrl=null;crtModuleName=null;crtWorkingModuleName=null;crtLanguage=null;wigii_operationSuccessfullTimeout=null;wigii_preventOperationSuccessfullTimeout=null;function object2Array(a){r=new Array;i=0;for(x in a){r[i++]=a[x]}return r}function prependCrtWigiiNamespaceAndModule2Url(a){return"#"+crtWigiiNamespaceUrl+"/"+crtModuleName+"/"+a}$.expr[":"].icontains=function(e,b,d,a){return(e.textContent||e.innerText||jQuery(e).text()||"").toLowerCase().indexOf(d[3].toLowerCase())>=0};dialogPos=new Array();busyDivStack=new Array();busyDivInterval=null;function setVis(a,b){if(typeof a!="object"){a=$("#"+a)}id=a.attr("id");if(b==true){a.show();if(id=="busyDiv"){if(busyDivStack.length==0){}busyDivStack.push("x")}}else{if(id=="busyDiv"){busyDivStack.pop();if(busyDivStack.length==0){a.hide()}}else{a.hide()}}}function resetBusyDiv(){busyDivStack=new Array();$("#busyDiv").hide()}function actOnCloseDialog(a){}function actOnCancelDialog(a){$("#"+a).stopTime();$("#"+a+" *").stopTime();$("#"+a).html("");closeAnyJsOnGoingStreams()}function emptyDialog(a){$("#"+a).stopTime();$("#"+a+" *").stopTime();$("#"+a).html("")}checkOpenItemTemp_id=null;checkOpenItemTemp_lookupPath=null;checkOpenItemTemp_url=null;checkOpenItemTemp_f=null;checkOpenItemTemp_informIfFoundInCache=null;function checkOpenItem(id,lookupPath,url,checkAnyOpenItem,informIfFoundInCache){if(arguments.length<2){lookupPath=null}if(arguments.length<3){url=null}if(arguments.length<4){checkAnyOpenItem=false}if(arguments.length<5){informIfFoundInCache=false}if(checkAnyOpenItem){f=$("form")}else{f=$("#"+id+" form")}if(f.length>0){if(f.length==1){checkOpenItemTemp_id=id;checkOpenItemTemp_lookupPath=lookupPath;checkOpenItemTemp_url=url;checkOpenItemTemp_f=f;checkOpenItemTemp_informIfFoundInCache=informIfFoundInCache;customConfirmTextFromDialogId=DIALOG_doYouWantToSaveChage;if(typeof(window["DIALOG_doYouWantToSave_"+id])!="undefined"){eval("customConfirmTextFromDialogId = DIALOG_doYouWantToSave_"+id)}cButton=$(".ui-dialog-buttonpane .cancel",checkOpenItemTemp_f.closest(".ui-dialog"));if(cButton.filter(":visible").length){jConfirm(customConfirmTextFromDialogId,null,function(check){if(check===true){$(".ui-dialog-buttonpane .ok",checkOpenItemTemp_f.closest(".ui-dialog")).click()}else{if(check===null){checkOpenItemTemp_url=null}else{if(check===false){$(".ui-dialog-buttonpane .cancel",checkOpenItemTemp_f.closest(".ui-dialog")).click();if(checkOpenItemTemp_url!=null){updateThroughCache(checkOpenItemTemp_id,checkOpenItemTemp_lookupPath,checkOpenItemTemp_url,null,checkOpenItemTemp_informIfFoundInCache,true);checkOpenItemTemp_url=null}}}}})}else{if(cButton.length){cButton.click();if(checkOpenItemTemp_url!=null){updateThroughCache(checkOpenItemTemp_id,checkOpenItemTemp_lookupPath,checkOpenItemTemp_url,null,checkOpenItemTemp_informIfFoundInCache,true);checkOpenItemTemp_url=null}}else{$(".ui-dialog-buttonpane .ok",checkOpenItemTemp_f.closest(".ui-dialog")).click()}}return true}else{jAlert(DIALOG_finishCurrentAction);return true}}return false}function checkOpenWorkzoneViewMode(id,lookupPath,url,checkAnyOpenItem,informIfFoundInCache){if(arguments.length<2){lookupPath=null}if(arguments.length<3){url=null}if(arguments.length<4){checkAnyOpenItem=false}if(arguments.length<5){informIfFoundInCache=false}if(checkAnyOpenItem){f=$(".elementDialog.docked").find("form")}else{f=$("#"+id).find("form")}if(f.length>0){if(f.length==1){checkOpenItemTemp_id=id;checkOpenItemTemp_lookupPath=lookupPath;checkOpenItemTemp_url=url;checkOpenItemTemp_f=f;checkOpenItemTemp_informIfFoundInCache=informIfFoundInCache;customConfirmTextFromDialogId=DIALOG_doYouWantToSaveChage;if(typeof(window["DIALOG_doYouWantToSave_"+id])!="undefined"){eval("customConfirmTextFromDialogId = DIALOG_doYouWantToSave_"+id)}cButton=$(".cancel.ui-button",checkOpenItemTemp_f);if(cButton.filter(":visible").length){jConfirm(customConfirmTextFromDialogId,null,function(check){if(check===true){$(".ok.ui-button",checkOpenItemTemp_f).click()}else{if(check===null){checkOpenItemTemp_url=null}else{if(check===false){$(".cancel.ui-button",checkOpenItemTemp_f).click();if(checkOpenItemTemp_url!=null){updateThroughCache(checkOpenItemTemp_id,checkOpenItemTemp_lookupPath,checkOpenItemTemp_url,null,checkOpenItemTemp_informIfFoundInCache,true);checkOpenItemTemp_url=null}}}}})}else{if(cButton.length){cButton.click();if(checkOpenItemTemp_url!=null){updateThroughCache(checkOpenItemTemp_id,checkOpenItemTemp_lookupPath,checkOpenItemTemp_url,null,checkOpenItemTemp_informIfFoundInCache,true);checkOpenItemTemp_url=null}}else{$(".ok.ui-button",checkOpenItemTemp_f).click()}}return true}else{jAlert(DIALOG_finishCurrentAction);return true}}return false}currentElementDialogViewCacheKey=null;function updateCurrentElementDialogViewCache(){if(__cache&&__cache.elementDialog&&__cache.elementDialog[currentElementDialogViewCacheKey]){setCacheFromDom("elementDialog",currentElementDialogViewCacheKey)}}function invalidCurrentElementDialogViewCache(){invalidCache("elementDialog",currentElementDialogViewCacheKey)}currentModuleViewCacheKey=null;function updateCurrentModuleViewCache(){if(__cache&&__cache.moduleView&&__cache.moduleView[currentModuleViewCacheKey]){setCacheFromDom("moduleView",currentModuleViewCacheKey)}}function invalidCurrentModuleViewCache(){invalidCache("moduleView",currentModuleViewCacheKey)}function invalidModuleViewCache(){invalidCache("moduleView")}__cache=new Object();__cacheJS=new Object();__cacheKeep=new Object();foundInCache=false;function updateThroughCache(id,lookupPath,url,checkAnyOpenItem,informIfFoundInCache,noOpenItemCheck){if(arguments.length<4){checkAnyOpenItem=false}if(arguments.length<5){informIfFoundInCache=false}if(arguments.length<6){noOpenItemCheck=false}if(!isWorkzoneViewDocked()){if(!noOpenItemCheck&&checkOpenItem(id,lookupPath,url,checkAnyOpenItem,informIfFoundInCache)){return}}else{if(!noOpenItemCheck&&checkOpenWorkzoneViewMode(id,lookupPath,url,checkAnyOpenItem,informIfFoundInCache)){return}}if(id=="moduleView"){currentModuleViewCacheKey=lookupPath}else{if(id=="elementDialog"){currentElementDialogViewCacheKey=lookupPath}}var r=null;var c=null;foundInCache=false;if(lookupPath){r=getCache(id,lookupPath);if(r){foundInCache=true}c=getJSCache(id,lookupPath);if(c){foundInCache=true}}if(foundInCache){if(r){$("#"+id+" *").stopTime();$("#"+id).html(r)}if(informIfFoundInCache){foundInCacheUpdate(url)}if(c){c="$(document).ready(function(){foundInCache=true;});"+c;eval(c)}foundInCache=false}else{update(url,true)}}function getCache(b,a){if(!__cache[b]){__cache[b]=new Object()}r=__cache[b][a];return r}function getJSCache(b,a){if(!__cacheJS[b]){__cacheJS[b]=new Object()}c=__cacheJS[b][a];return c}function setCache(d,b,a){if(!__cache[d]){__cache[d]=new Object()}__cache[d][b]=a}function setJSCache(d,b,a){if(!__cacheJS[d]){__cacheJS[d]=new Object()}__cacheJS[d][b]=a}function setCacheFromDom(b,a){if(b==null){alert("try to setCacheFromDom with no id. WigiiExecutor.js");return}if(!__cache[b]){__cache[b]=new Object()}if(!__cacheJS[b]){__cacheJS[b]=new Object()}__cache[b][a]=$("#"+b).html();if($("#JSCode"+b).length>0){__cacheJS[b][a]=$("#JSCode"+b).text()}}function invalidCompleteCache(d){if(arguments.length<1){d=false}__cache=new Object();__cacheJS=new Object();if(!d){var a=window;while(a.opener){try{if(a.opener.location.hostname==a.location.hostname){a.opener.invalidCompleteCache(true);a=a.opener}else{a=false}}catch(b){a=false}}}}function invalidCache(k,j,e){if(arguments.length<2){j=null}if(arguments.length<3){e=false}if(!__cache[k]){__cache[k]=new Object()}if(!__cacheJS[k]){__cacheJS[k]=new Object()}if(j){if(!__cacheKeep[j]){__cache[k][j]=null;__cacheJS[k][j]=null}}else{var h=__cache[k];var g=new Object();for(var b in h){if(__cacheKeep[b]){g[b]=h[b]}}__cache[k]=g;h=__cacheJS[k];g=new Object();for(var b in h){if(__cacheKeep[b]){g[b]=h[b]}}__cacheJS[k]=g}if(!e){var a=window;while(a.opener){try{if(a.opener.location.hostname==a.location.hostname){a.opener.invalidCache(k,j,true);a=a.opener}else{a=false}}catch(d){a=false}}}}function keepInCache(a){__cacheKeep[a]=a}function clearKeepInCache(){__cacheKeep=new Object()}var crtNavigateCacheKey=null;function setModuleViewKeyCacheForNavigate(a){setJSCache("navigationCache",crtNavigateCacheKey,a)}function getModuleViewKeyCacheForNavigate(){return getJSCache("navigationCache",crtNavigateCacheKey)}function setCurrentNavigateCacheKey(a){crtNavigateCacheKey=a}function foundInCacheUpdate(a){if(a==null){return}s=a.split("/");s[0]=EXEC_foundInJSCache;a=s.join("/");a=SITE_ROOT+"Update/"+crtContextId+EXEC_requestSeparator+a;var b=new jQuery.ajax({url:encodeURI(a),success:parseUpdateResult,cache:false,error:errorOnUpdate});onUpdateErrorCounter=0}function update(b,g,d,a){if(arguments.length<2){g=false}if(arguments.length<3){d=null}if(arguments.length<4){a=null}if(b==null){return}idAnswer=b.split("/")[0];if(!g){if(isWorkzoneViewDocked()){if(checkOpenWorkzoneViewMode(idAnswer,null,b)){return}}else{if(checkOpenItem(idAnswer,null,b)){return}}}setVis("busyDiv",true);b=SITE_ROOT+"Update/"+crtContextId+EXEC_requestSeparator+b;if(d!=null){var e=new jQuery.ajax({type:"POST",url:encodeURI(b),success:(a!=null?a:parseUpdateResult),data:d,error:errorOnUpdate})}else{var e=new jQuery.ajax({url:encodeURI(b),success:(a!=null?a:parseUpdateResult),cache:false,error:errorOnUpdate})}onUpdateErrorCounter=0}function download(a){a=SITE_ROOT+"useContext/"+crtContextId+EXEC_requestSeparator+a.replace(SITE_ROOT,"");window.location.href=a}function longDownload(b,a){messageDownload(a);setTimeout(function(){setVis("fileDownloadingBar",false)},5000);download(b)}onUpdateErrorCounter=0;function errorOnUpdate(a,e,d){onUpdateErrorCounter++;if(onUpdateErrorCounter<=3){var b=new jQuery.ajax({url:this.url,data:this.data,method:this.method,type:this.type,success:this.success,cache:false,error:this.error})}}encHTML=function(a){return a.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")};decHTML=function(a){return a.replace(/\n/g," ").replace(/\r/g," ").replace(/&quot;/g,'"').replace(/&#39;/g,"'").replace(/&mySQ;/g,"'").replace(/&oelig;/g,"œ").replace(/&amp;/g,"&").replace(/&lt;/g,"<").replace(/&gt;/g,">")};function parseUpdateResult(a,b){if(savingBarTimeout){clearTimeout(savingBarTimeout);savingBarTimeout=null}setVis("savingBar",false);wigii().parseUpdateResult(a,b);setVis("busyDiv",false)}function positionElementOnMouse(e,b,g,d,a){if(arguments.length<4){d=null}if(arguments.length<5){a=null}if(d!=null){offsetLow=5;scrollTop=parseInt($(document).scrollTop());if(scrollTop!=0){scrollTop=scrollTop-5}if(parseInt(d.offset().top)+parseInt(d.height())-parseInt(b.clientY)+scrollTop<=offsetLow){offsetLow=parseInt(d.offset().top)+parseInt(d.height())-parseInt(b.clientY)+scrollTop-2}}else{offsetLow=0;scrollTop=parseInt($(document).scrollTop())}positionElement(e,b.clientY+scrollTop,b.clientX+parseInt($(document).scrollLeft()),30,5,g,offsetLow+a,true)}function positionElementOnDom(e,a,h,b,l,d){if(arguments.length<4){b=null}if(arguments.length<5){l=false}if(arguments.length<6){d=false}if(d){var k=a.position()}else{var k=a.offset()}var g=k.left;var j=k.top;positionElement(e,j,g,a.outerHeight(),a.outerWidth(),h,b,l)}function positionElement(g,d,k,n,h,l,b,q){var j,p;if(l=="center"){j=k+h/2-g.outerWidth()/2}else{if(l=="right"){j=k+h}else{if(l=="left"){j=k-g.outerWidth()}else{if(l=="fromLeft"){j=k}else{if(l=="fromRight"){j=k+h-g.outerWidth()}else{if(l=="fromCenter"){j=k+(h/2)}else{if(l=="toCenter"){j=k+(h/2)-g.outerWidth()}}}}}}}if(b===null){p=d+n}else{p=d+b}var o,e;if(self.innerHeight){if(document.documentElement.clientWidth){o=document.documentElement.clientWidth}else{o=self.innerWidth}e=self.innerHeight}else{if(document.documentElement&&document.documentElement.clientHeight){o=document.documentElement.clientWidth;e=document.documentElement.clientHeight}else{if(document.body){o=document.body.clientWidth;e=document.body.clientHeight}}}var a=g.outerWidth();var t=g.outerHeight();p=Math.min(e-t,p-$(document).scrollTop());p=Math.max(0,p);if(q){if((p+$(document).scrollTop()<(d+n)&&(p+$(document).scrollTop()+t)>d)){if((o-a<j+$(document).scrollLeft())&&(k-a>0)){j=k-a}else{}}}if(!q){j=Math.min(o-a,j-$(document).scrollLeft())}j=Math.min(o-a,j-$(document).scrollLeft());j=Math.max(0,j);g.css("left",j+$(document).scrollLeft());g.css("top",p+$(document).scrollTop())}showHelpTimer=null;hideHelpTimer=null;doHideHelpTimer=null;var showHelpRef,showHelpText,showHelpOffsetLow,showHelpAlign,showHelpDelay,showHelpMaxWidth,showHelpDefinedWidth,showHelpHideAfter,showHelpEvent;function showHelp2(){var a=showHelpEvent;var e=showHelpRef;var l=showHelpText;var b=showHelpOffsetLow;var j=showHelpAlign;var h=showHelpDelay;var k=showHelpMaxWidth;var d=showHelpDefinedWidth;var g=showHelpHideAfter;helpEl=$("#help");helpEl.width(5);helpEl.html(l);if(d){helpEl.width(k)}else{helpEl.width("auto");if(helpEl.width()>k){helpEl.width(k)}}$("#help").stop(true,true).show();$("#help").hide();if(typeof e!="object"){e=$("#"+e)}else{e=$(e)}if(a!=null&&typeof a=="object"&&a.clientY){positionElementOnMouse(helpEl,a,j,e,b)}else{positionElementOnDom(helpEl,e,j,b,false)}$("#help").unbind().mouseenter(function(){clearTimeout(doHideHelpTimer)}).mousemove(function(){hideHelp(true)});$("#help").stop(true,true).show()}function showHelp(g,j,h,k,b,e,a,d){clearTimeout(doHideHelpTimer);clearTimeout(hideHelpTimer);if(j==""){return}definedWidth=false;if(arguments.length<3){h=null}if(arguments.length<4){k="fromCenter"}if(arguments.length<5){b=200}if(arguments.length<6||e==null){e=200;definedWidth=false}if(arguments.length<7){a=3500}if(arguments.length<8){d=null}showHelpEvent=d;showHelpRef=g;showHelpText=j;showHelpOffsetLow=h;showHelpAlign=k;showHelpDelay=b;showHelpMaxWidth=e;showHelpDefinedWidth=definedWidth;showHelpHideAfter=a;if(b!=0){showHelpTimer=setTimeout("showHelp2();",b)}else{showHelp2()}if(a!=0){hideHelpTimer=setTimeout("hideHelp();",a)}else{hideHelpTimer=setTimeout("hideHelp();",10000)}}function hideHelp(a){if(arguments.length<1){a=false}clearTimeout(doHideHelpTimer);if(a){clearTimeout(showHelpTimer);clearTimeout(hideHelpTimer);$("#help").hide()}else{doHideHelpTimer=setTimeout("hideHelp(true);","50")}}var multipleSelectVals=new Array;function multipleSelectOnClick(h){var g=$("#"+h).scrollTop();var e=new Array;var d=false;var a=$("#"+h);var b=multipleSelectVals[h];$(b).each(function(j){if(this.toString()!=a.val().toString()){e[e.length]=this.toString()}else{d=true}});if(!d&&a.val()){e[e.length]=a.val().toString()}multipleSelectVals[h]=e;a.val(e);a.scrollTop(g)}function colorize(a){if(arguments.length<1){a=$(window)}else{a=$("#"+a)}$('#moduleView *[class*="color_"]').each(function(){color="#"+$(this).attr("class").match(/color_(.{6})/i)[1].toUpperCase();$(this).css("background-color",color).css("border-color",color);var h=HexToR(color),e=HexToG(color),d=HexToB(color);var j=(h*299+e*587+d*114)/1000;if(j>140){$("*",this).css("color","#000000")}else{$("*",this).css("color","#FFFFFF")}})}function HexToR(a){return parseInt((cutHex(a)).substring(0,2),16)}function HexToG(a){return parseInt((cutHex(a)).substring(2,4),16)}function HexToB(a){return parseInt((cutHex(a)).substring(4,6),16)}function cutHex(a){return(a.charAt(0)=="#")?a.substring(1,7):a}var globalCronJobsStopper=false;var doingWakeup=false;var cronJobsWorkingFunction=function(a){if(arguments.length<1){a=""}if(doingWakeup){return}doingWakeup=true;resetBusyDiv();$("#cronJobsCursor").text(" > ");update("JSCode/NoWigiiNamespace/NoModule/wakeup/"+a)};var cronJobsFinishWorkingFunction=function(){doingWakeup=false};function setListenersToCronJob(b,a){$("#cronJobsStart").click(function(){$("#cronJobsNb").stopTime("cronJobsWorking");$("#cronJobsStop span").stopTime("cronJobsPostpone");$("#cronJobsStop span").text("");cronJobsFinishWorkingFunction();globalCronJobsStopper=false;b()});$("#cronJobsStop").click(function(){$("#cronJobsNb").stopTime("cronJobsWorking");$("#cronJobsNb").stopTime("cronJobsWakeup");globalCronJobsStopper=true;s=(a)/1000;m=Math.floor(s/60);s=s%60;if(s<10){s="0"+s}$("#cronJobsStop span").text(" "+m+":"+s);$("#cronJobsStop span").stopTime("cronJobsPostpone");$("#cronJobsStop span").everyTime(1000,"cronJobsPostpone",function(d){s=(a-(d*1000))/1000;m=Math.floor(s/60);s=s%60;if(s<10){s="0"+s}$(this).text(" "+m+":"+s)});$("#cronJobsNb").oneTime(a,"cronJobsWorking",function(){$("#cronJobsStop span").stopTime("cronJobsPostpone");$("#cronJobsStart").click()})})}function logout(){update("NoAnswer/NoWigiiNamespace/NoModule/logout")};