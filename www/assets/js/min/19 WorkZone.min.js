function getTopHeight(b){if(arguments.length<1){b=false}var a=0;$("#companyBanner").children().each(function(){a+=$(this).outerHeight()});a+=$("#NMContainer").outerHeight();a+=$("#NMContainerBsp").outerHeight();if(b){a+=3}return a}function resize_groupPanel(){resize_groupPanel_i=$("#groupPanel>ul");fb=$("#footerBar");gpT=$("#groupPanel>.keepNotify");if(resize_groupPanel_i.length>0){if($("#NMContainerBsp").height()>0){var b=false}else{var b=true}if(typeof gpT.outerHeight()!="undefined"){resize_groupPanel_i.height($(window).height()-getTopHeight(b)-fb.outerHeight()-gpT.outerHeight()-20)}else{resize_groupPanel_i.height($(window).height()-getTopHeight(b)-fb.outerHeight()-20)}var c=$(window).height()-getTopHeight(b)-fb.outerHeight();var a=c/2-30;$("#groupPanel>.collapse").height(c-a-1).css("padding-top",a)}}$(window).resize(resize_groupPanel);ElementPListRows_makeHeaders_getTotalWidth=0;ElementPListRows_makeHeaders_getNbNoWidth=0;ElementPListRows_makeHeaders_getNb=0;ElementPListRows_makeHeaders_totalPaddingInCol=0;ElementPListRows_scrollWidth=17;function ElementPListRows_makeHeaders(){cor=0;$("#moduleView .list .headerList>div.noWidth").width(Math.max(75,parseInt(($("#moduleView .list").width()-ElementPListRows_scrollWidth-ElementPListRows_makeHeaders_getTotalWidth-(cor*ElementPListRows_makeHeaders_getNb))/ElementPListRows_makeHeaders_getNbNoWidth)-ElementPListRows_makeHeaders_totalPaddingInCol));$("#moduleView .list .headerList>div:last").css("padding-right",ElementPListRows_scrollWidth+"px")}function resize_elementList(){if(isWorkzoneViewDocked()&&crtModuleName!="Admin"&&!$("#elementDialog").hasClass("ui-dialog-content")){resize_workzoneViewDocked()}resize_iframe_i=$("#moduleView iframe");if(resize_iframe_i.height()>0){resize_iframe_i.height($(window).height()-getTopHeight(true)-fb.outerHeight())}resize_elementList_i=$("#moduleView>div.list>div.dataList");fb=$("#footerBar");if(resize_elementList_i.length>0){ElementPListRows_makeHeaders();tempTableWidth=0;$("#moduleView .list .headerList>div").each(function(){tempTableWidth+=parseInt($(this).outerWidth())});$("#moduleView .list .dataList table").width(tempTableWidth-ElementPListRows_scrollWidth);$("#moduleView .list .dataList table").css("table-layout","fixed");$("#moduleView>div.list .headerList").width(tempTableWidth);if(tempTableWidth>$("#moduleView .list").width()){$("#moduleView div.nbItemsInList").css("margin-top","-42px")}else{$("#moduleView div.nbItemsInList").css("margin-top","-25px")}if($(".Red").height()>0){resize_elementList_i.height($(window).height()-getTopHeight(true)-$("#moduleView > .dataZone.list > .headerList").outerHeight()-$("#moduleView #indicators").height()-fb.outerHeight()-26-8)}else{resize_elementList_i.height($(window).height()-getTopHeight(true)-$("#moduleView > .dataZone.list > .headerList").outerHeight()-$("#moduleView #indicators").height()-fb.outerHeight()-8)}$("#moduleView .list .dataList").unbind("scroll").scroll(function(){$("#moduleView>div.list .headerList").css("margin-left",-$(this).scrollLeft())})}resize_portal();resize_coverPage();resize_calendar();resize_blog();resize_wncd();if(!isWorkzoneViewDocked()||crtModuleName=="Admin"){resize_scrollArea(true)}}$(window).resize(resize_elementList);function resize_workzoneViewDocked(){var u="&laquo;",j="&raquo;",v=$("#groupPanel>.collapse"),t=$("#elementDialog"),e=$("#moduleView"),l=$("#groupPanel"),o=$("#dockingContainer");dockingCollapse=o.find(".collapse");height=$(window).innerHeight()-getTopHeight(true)-$("#footerBar").outerHeight(),availableWidthSpace=$(window).innerWidth();var q=$("#elementDialog:visible").length==1,n=$(window).innerWidth(),b=$("#scrollElement").width(),f=b+15,a=l.outerWidth(),g=n-a-f,r=l.data("GroupListCollapsed")||0;ListViewCollapsed=e.data("ListViewCollapsed")||0;collapseMinWidth=e.data("minWidth")||100;dockingCollapse.height(v.height()).css("padding-top",v.css("padding-top"));t.width(f);var x=l.data("userClickCollapse")||dockingCollapse.find("span").data("userClickCollapse");if(q){if(r==1&&!x||g<collapseMinWidth&&!x){l.find("ul#group_0").hide();l.find(".keepNotify").hide();positionSelectedGroup("#groupPanel");l.find(".collapse").html(j);a=l.outerWidth();g=n-a-f;if(ListViewCollapsed==1&&!x||g<collapseMinWidth&&!x){e.hide();dockingCollapse.find("span").html(j)}}if(ListViewCollapsed==1&&!x){e.hide();dockingCollapse.find("span").html(j)}}else{if(!x){l.find("ul#group_0").show();l.find(".keepNotify").show();positionSelectedGroup("#groupPanel");l.find(".collapse").html(u);a=l.outerWidth()}}l.data("userClickCollapse",false);dockingCollapse.find("span").data("userClickCollapse",false);var m=t.outerWidth()-f;availableWidthSpace-=a;if(t.children().length==0||t.css("display")=="none"){availableWidthSpace-=e.outerWidth()-e.width();e.width(availableWidthSpace).show();return}if($("#dockingContainer>.collapse:hidden").length==0){availableWidthSpace-=dockingCollapse.outerWidth()}if(o.find("#moduleView:hidden").length==0){var k=availableWidthSpace-t.outerWidth();var c=collapseMinWidth;if(k<=c){e.width(c);t.width(availableWidthSpace-m-e.outerWidth())}else{e.width(k-15);t.width(f+(m/2))}}else{availableWidthSpace-=m;t.width(availableWidthSpace)}t.height(height+(t.height()-t.outerHeight())).css("overflow","auto");if(q){$(".firstBox, .toolbarBox","#searchBar").hide()}}function resize_homePage(){resize_homePage_i=$("#workZone #ContainerHome");fb=$("#footerBar");if(resize_homePage_i.length>0){resize_homePage_i.height($(window).height()-resize_homePage_i.position().top-fb.outerHeight()-40);if($("#workZone #quickStartTabs").length){$("#workZone #quickStartTabs").css("min-width",$(window).width()-50-$("#workZone #ContainerHome").outerWidth())}}}$(window).resize(resize_homePage);function resize_portal(){if($("#moduleView .portal:visible").length>0&&$("#moduleView .portal>.media").length>0){$("#moduleView .portal").css("float","left");fb=$("#footerBar");tempResizePortalHeight=$(window).height()-$("#moduleView").position().top-$("#moduleView .toolBar").height()-$("#moduleView #indicators").height()-fb.outerHeight()-1;$("#moduleView .portal").height(tempResizePortalHeight);$("#moduleView .portal").width($(window).width()-$("#groupPanel").outerWidth()-4);$("#moduleView .portal").css("overflow","hidden");$("#moduleView .portal .media>iframe").attr("height",$("#moduleView .portal").height()).attr("width",$("#moduleView .portal").width())}resize_groupPanel()}function resize_coverPage(){if($("#moduleView .portal:visible").length>0&&$("#moduleView .portal>.media").length==0){$("#moduleView .portal").css("float","left");fb=$("#footerBar");tempResizePortalHeight=$(window).height()-$("#moduleView").position().top-$("#moduleView .toolBar").height()-$("#moduleView #indicators").height()-fb.outerHeight()-1;$("#moduleView .portal").height(tempResizePortalHeight);$("#moduleView .portal").width($(window).width()-$("#groupPanel").outerWidth()-24);$("#moduleView .portal").css("overflow","auto")}}coverPage_toggleList_titleList=null;coverPage_toggleList_titleWebsite=null;function coverPage_toggleList(){$(document).ready(function(){if($("#searchBar .toolbarBox .toggleCoverPage").length==0){$("#searchBar .toolbarBox div.addNewElement").after('<div class="toggleCoverPage" style="display:none;" onclick="coverPage_toggleList();"><span class="H"></span></div>')}if($("#moduleView .dataZone:visible").length>0){showCoverPage()}else{hideCoverPage()}})}function removeCoverPageItems(){hideCoverPage();$("#searchBar .toolbarBox .toggleCoverPage").hide()}function showCoverPage(){$("#moduleView .dataZone").hide();$("#searchBar .toolbarBox div:not(.toggleCoverPage,.addNewElement)").hide();$("#searchBar .toolbarBox .toggleCoverPage span").text(coverPage_toggleList_titleList).parent().show();$("#moduleView .portal").show();resize_elementList()}function hideCoverPage(){$("#moduleView .portal").hide();$("#searchBar .toolbarBox .toggleCoverPage span").text(coverPage_toggleList_titleWebsite).parent().show();$("#searchBar .toolbarBox div:not(.toggleCoverPage,.addNewElement,.cm,.disabledR,.ui-dialog)").show();$("#moduleView .dataZone").show();resize_elementList()}function isWorkzoneViewDocked(){return wigii().context.isWorkzoneViewDocked}function fold(a){$(a+" ul ul").hide();$(a+" span.with-ul-displayed").removeClass("with-ul-displayed").addClass("with-ul-hidden")}function unfoldToSelectedGroup(c,b){if(arguments.length<2){b="selected"}var a=false;if(c=="#groupPanel"&&$(c+">ul:hidden").length){a=true}$(c+" ul:has(li.disabled)").show();$(c+" li.disabled>ul").show();$(c+" li.disabled>div>span.with-ul-hidden").removeClass("with-ul-hidden").addClass("with-ul-displayed");$(c+" ul:has(div."+b+")").show();$(c+" li."+b+">ul").show();$(c+" li:has(li div."+b+")>div>span.with-ul-hidden").removeClass("with-ul-hidden").addClass("with-ul-displayed");$(c+" li:has(>div."+b+")>div>span.with-ul-hidden").removeClass("with-ul-hidden").addClass("with-ul-displayed");if(a){$(c+">ul").hide()}}function unfoldToSelectedGroupButNotChildren(b,a){if(arguments.length<2){a="selected"}$(b+" ul:has(li.disabled)").show();$(b+" li.disabled>ul").show();$(b+" li.disabled>div>span.with-ul-hidden").removeClass("with-ul-hidden").addClass("with-ul-displayed");$(b+" ul:has(div."+a+")").show();$(b+" li:has(li div."+a+")>div>span.with-ul-hidden").removeClass("with-ul-hidden").addClass("with-ul-displayed")}function positionSelectedGroup(b,a){if(arguments.length<2){a="selected"}group=$(b+" li."+a);if(group.length>0){p=group.offset().top-$(b+">ul").offset().top+$(b+">ul").scrollTop();h=$(b+">ul").innerHeight();s=$(b+">ul").scrollTop();d=group.outerHeight();if(p<s){$(b+">ul").scrollTop(p-10)}else{if((p+d)>(h+s)){$(b+">ul").scrollTop(Math.min(p-10,p-h+d+10))}}}}function prepareOrganizeDialog(a,b){$("#organizeDialog").html('<div class="groupPanel"></div><div class="clear"></div>');$("#organizeDialog>.groupPanel").html($("#groupPanel>ul").clone(true));$("#organizeDialog>.groupPanel span.menu").remove();$("#organizeDialog>.groupPanel span.description").remove();$("#organizeDialog>.groupPanel div, #organizeDialog>.groupPanel li, #organizeDialog>.groupPanel ul, #organizeDialog>.groupPanel a.H").unbind();$("#organizeDialog .disabled").removeClass("disabled");$("#organizeDialog .selected").removeClass("selected");$("#organizeDialog .found").removeClass("found");$("#organizeDialog .hidden").show().removeClass("hidden");$("#organizeDialog .empty").removeClass("empty");$("#organizeDialog>.groupPanel>ul").height($("#moduleView").height()-80-10).show();$("#organizeDialog>.groupPanel li>div>a").before('<span class="checkbox">&nbsp;</span>');$("#organizeDialog>.groupPanel li>div").click(a);fold("#organizeDialog>.groupPanel");tempWidth=450;$("#organizeDialog>.groupPanel #group_0").width(tempWidth).css("overflow-x","auto");$("#organizeDialog>.groupPanel a").css("white-space","nowrap");$("#organizeDialog>.groupPanel").css("margin-bottom",0);$("#organizeDialog>.groupPanel>ul").css("height",$("#organizeDialog>.groupPanel>ul").height()-20);$("#organizeDialog").dialog({width:tempWidth+20,buttons:[{text:DIALOG_okLabel,click:b,"class":"ok"},{text:DIALOG_cancelLabel,click:function(){$(this).dialog("destroy")},"class":"cancel"}],closeOnEscape:true,stack:false,resizable:false,zIndex:0,modal:true})}function parseKeepNotifiedResult(a,b){setVis("busyDiv",false);otherRequest=a.split(EXEC_answerRequestSeparator);a=otherRequest[0].split(EXEC_answerParamSeparator);otherRequest.shift();i=1;$("#ui-dialog-title-organizeDialog").text(a[i++]);if(a[i++]=="emailAdressIsDefined"){$("#organizeDialog>.notifiedIntroduction").remove();$("#organizeDialog").prepend('<div class="notifiedIntroduction">'+a[i++]+"</div>");$("#organizeDialog>.groupPanel").show();fold("#organizeDialog>.groupPanel");$("#organizeDialog>.groupPanel .selected").removeClass("selected");$("#organizeDialog>.groupPanel .originalSelected").removeClass("originalSelected");checkedFolders=new Array();if(a[i]){checkedFolders=a[i++].split(",")}for(i=0;i<checkedFolders.length;i++){id=checkedFolders[i];$("#organizeDialog>.groupPanel #group_"+id+", #organizeDialog>.groupPanel #group_"+id+">div").addClass("selected originalSelected");$("#organizeDialog>.groupPanel #group_"+id+" li").addClass("selected");$("#organizeDialog>.groupPanel #group_"+id+" li>div").addClass("selected")}$("#organizeDialog>.groupPanel li.noRights").addClass("disabled noRights");$("#organizeDialog>.groupPanel li.noRights>div").addClass("disabled noRights");unfoldToSelectedGroupButNotChildren("#organizeDialog>.groupPanel","originalSelected");positionSelectedGroup("#organizeDialog>.groupPanel")}else{$("#organizeDialog>.groupPanel").hide();$("#organizeDialog>.notifiedIntroduction").remove();$("#organizeDialog").prepend('<div class="notifiedIntroduction">'+a[i++]+"</div>")}if(otherRequest){parseUpdateResult(otherRequest.join(EXEC_answerRequestSeparator),b)}}function actionForKeepNotified(b){setVis("busyDiv",true);original=new Array();actual=new Array();if(b=="setKeepNotifiedGroupsForEmail"){$("#organizeDialog li.originalSelected").each(function(){original[original.length]=$(this).attr("id").split("_")[1]});$("#organizeDialog li.selected").each(function(){if(!$(this).parent().parent().hasClass("selected")){actual[actual.length]=$(this).attr("id").split("_")[1]}})}url=SITE_ROOT+"Update/"+crtContextId+EXEC_requestSeparator+"organizeDialog/"+crtWigiiNamespaceUrl+"/"+crtModuleName+"/"+b;var a=new jQuery.ajax({type:"POST",url:encodeURI(url),success:parseKeepNotifiedResult,cache:false,data:{emailAccountForP:$("#KeepNotifiedEmailInput").val(),original:original,actual:actual},error:errorOnUpdate});onUpdateErrorCounter=0}function openKeepNotifiedDialog(){prepareOrganizeDialog(function(b){if(!$(this).hasClass("disabled")){$(this).toggleClass("selected");if($(this).hasClass("selected")){$(this).parent().addClass("selected").find("li, li>div").addClass("selected")}else{$(this).parents(".selected").removeClass("selected");$(this).parent().find("li").removeClass("selected");$("#organizeDialog li:not(.selected)>div.selected").removeClass("selected")}}return false},function(){if($("#KeepNotifiedEmailInput").length){actionForKeepNotified("setKeepNotifiedEmail")}else{actionForKeepNotified("setKeepNotifiedGroupsForEmail");if($("#organizeDialog").is(":ui-dialog")){$("#organizeDialog").dialog("destroy")}}});url=SITE_ROOT+"Update/"+crtContextId+EXEC_requestSeparator+"organizeDialog/"+crtWigiiNamespaceUrl+"/"+crtModuleName+"/getKeepNotifiedDialogContent/";setVis("busyDiv",true);var a=new jQuery.ajax({url:encodeURI(url),cache:false,success:parseKeepNotifiedResult,error:errorOnUpdate});onUpdateErrorCounter=0}function openOrganizeDialog(a){newCheckedFolders=new Object();checkedFolders=new Array();prepareOrganizeDialog(function(c){if(!$(this).hasClass("disabled")){$(this).toggleClass("selected");$("#organizeDialog>div>span.nb").removeClass("zero");if($(this).hasClass("selected")){newCheckedFolders[$(this).parent().attr("id").split("_")[1]]=$(this).parent().attr("id").split("_")[1];$("#organizeDialog>div>span.nb").text(parseInt($("#organizeDialog>div>span.nb").text())+1)}else{newCheckedFolders[$(this).parent().attr("id").split("_")[1]]=null;$("#organizeDialog>div>span.nb").text(parseInt($("#organizeDialog>div>span.nb").text())-1);if(parseInt($("#organizeDialog>div>span.nb").text())<1){$("#organizeDialog>div>span.nb").addClass("zero")}}}return false},function(){if(parseInt($("#organizeDialog>div>span.nb").text())==0){jAlert(DIALOG_selectAtLeastOneGroup);return false}url=SITE_ROOT+"Update/"+crtContextId+EXEC_requestSeparator+"confirmationDialog/"+crtWigiiNamespaceUrl+"/"+crtModuleName+"/element/setGroupsContainingElement/"+a;var c=new jQuery.ajax({type:"POST",url:encodeURI(url),success:parseUpdateResult,cache:false,data:{original:checkedFolders.join(","),actual:object2Array(newCheckedFolders).join(",")},error:errorOnUpdate});onUpdateErrorCounter=0;$(this).dialog("destroy");$("#elementDialog").prev().find(".ui-dialog-titlebar-close").click()});url=SITE_ROOT+"Update/"+crtContextId+EXEC_requestSeparator+"organizeDialog/"+crtWigiiNamespaceUrl+"/"+crtModuleName+"/element/getGroupsContainingElement/"+a;setVis("busyDiv",true);var b=new jQuery.ajax({url:encodeURI(url),cache:false,success:function(c,e){setVis("busyDiv",false);c=c.split(EXEC_answerRequestSeparator)[0].split(EXEC_answerParamSeparator);dialogTitle=c[1];$("#organizeDialog").prev().find(".ui-dialog-title").text(dialogTitle);checkedFolders=c[4];if(checkedFolders==""){return}checkedFolders=checkedFolders.split(",");for(i=0;i<checkedFolders.length;i++){id=checkedFolders[i];newCheckedFolders[id]=id;$("#organizeDialog>.groupPanel #group_"+id+", #organizeDialog>.groupPanel #group_"+id+">div").addClass("selected")}nbSelected=c[2];nbSelected=$("#organizeDialog>.groupPanel li.selected").length;textSelected=c[3];$("#organizeDialog").prepend('<div class="introduction"><span class="nb">'+nbSelected+"</span>&nbsp;<span>"+textSelected+"</span></div>");if(wigii().context.crtElementState&2){$("#organizeDialog>.groupPanel li.trashbin, #organizeDialog>.groupPanel li.trashbin li").removeClass("write").hide()}$("#organizeDialog>.groupPanel li:not(.write)").addClass("disabled noRights");$("#organizeDialog>.groupPanel li:not(.write)>div").addClass("disabled noRights");unfoldToSelectedGroupButNotChildren("#organizeDialog>.groupPanel");positionSelectedGroup("#organizeDialog>.groupPanel")},error:errorOnUpdate});onUpdateErrorCounter=0}function openOrganizeMultipleDialog(){prepareOrganizeDialog(function(e){if(!$(this).hasClass("disabled")){if($(this).hasClass("wasMixed")){if($(this).hasClass("mixed")){$(this).add($(this).parent()).removeClass("selected").removeClass("mixed")}else{if($(this).hasClass("selected")){$(this).add($(this).parent()).removeClass("selected").addClass("mixed selected")}else{$(this).add($(this).parent()).addClass("selected")}}}else{if($(this).hasClass("wasSelected")){$(this).add($(this).parent()).toggleClass("selected")}else{if($(this).hasClass("wasUnselected")){$(this).add($(this).parent()).toggleClass("selected")}}}}return false},function(){setVis("busyDiv",true);changeToSelected=new Array();$("#organizeDialog li.wasMixed.selected:not(.mixed), #organizeDialog li.wasUnselected.selected").each(function(){changeToSelected[changeToSelected.length]=$(this).attr("id").replace("group_","")});changeToUnselected=new Array();$("#organizeDialog li.wasMixed:not(.selected), #organizeDialog li.wasSelected:not(.selected)").each(function(){changeToUnselected[changeToUnselected.length]=$(this).attr("id").replace("group_","")});url=SITE_ROOT+"Update/"+crtContextId+EXEC_requestSeparator+"confirmationDialog/"+crtWigiiNamespaceUrl+"/"+crtModuleName+"/element/setGroupsContainingElements/multiple";var myAjax=new jQuery.ajax({type:"POST",url:encodeURI(url),success:parseUpdateResult,cache:false,data:{changeToUnselected:changeToUnselected.join(","),changeToSelected:changeToSelected.join(",")},error:errorOnUpdate});onUpdateErrorCounter=0});url=SITE_ROOT+"Update/"+crtContextId+EXEC_requestSeparator+"organizeDialog/"+crtWigiiNamespaceUrl+"/"+crtModuleName+"/element/getGroupsContainingElements/multiple";setVis("busyDiv",true);var myAjax=new jQuery.ajax({url:encodeURI(url),cache:false,success:function(returnText,textStatus){setVis("busyDiv",false);returnText=returnText.split(EXEC_answerRequestSeparator)[0].split(EXEC_answerParamSeparator);dialogTitle=returnText[1];$("#organizeDialog").prev().find(".ui-dialog-title").text(dialogTitle);eval(returnText[2]);totalElementsChecked=parseInt($("#multipleDialog .summary .multipleSelectionNb").text());for(i in originalFolders){groupId=i;isSelected=originalFolders[i]==totalElementsChecked;isMixed=originalFolders[i]&&!isSelected;$("#organizeDialog>.groupPanel #group_"+groupId+", #organizeDialog>.groupPanel #group_"+groupId+">div").addClass("selected");if(isMixed){$("#organizeDialog>.groupPanel #group_"+groupId+", #organizeDialog>.groupPanel #group_"+groupId+">div").addClass("mixed wasMixed")}else{if(isSelected){$("#organizeDialog>.groupPanel #group_"+groupId+", #organizeDialog>.groupPanel #group_"+groupId+">div").addClass("wasSelected")}}}$("#organizeDialog>.groupPanel li:not(.selected), #organizeDialog>.groupPanel li>div:not(.selected)").addClass("wasUnselected");if(multipleElementStatePerm&2){$("#organizeDialog>.groupPanel li.trashbin, #organizeDialog>.groupPanel li.trashbin li").removeClass("write").hide()}$("#organizeDialog>.groupPanel li:not(.write)").addClass("disabled noRights");$("#organizeDialog>.groupPanel li:not(.write)>div").addClass("disabled noRights");unfoldToSelectedGroupButNotChildren("#organizeDialog>.groupPanel");positionSelectedGroup("#organizeDialog>.groupPanel")},error:errorOnUpdate});onUpdateErrorCounter=0}function removeElementInList(a){if($("#moduleView div.dataZone.wncd").length>0){wigii().getWncdContainer().elementDeleted(a)}else{if($("#moduleView #row_"+a).hasClass("S")){$("#groupPanel div.highlight").removeClass("highlight")}$("#moduleView #row_"+a).remove()}}function addElementInList(a){if($("#moduleView #row_"+a).length){updateElementInList(a)}else{url=SITE_ROOT+"Update/"+crtContextId+EXEC_requestSeparator+"row_"+a+"/"+crtWigiiNamespaceUrl+"/"+crtModuleName+"/addElementInList/"+a;setVis("busyDiv",true);var b=new jQuery.ajax({url:encodeURI(url),cache:false,success:function(c,e){setVis("busyDiv",false);otherRequest=c.split(EXEC_answerRequestSeparator);c=otherRequest[0].split(EXEC_answerParamSeparator);otherRequest.shift();i=1;if($("#moduleView .groupList").length>0){$("#moduleView .groupList").after(c[i++])}else{$("#moduleView tr.folder:last").after(c[i++])}if(otherRequest){parseUpdateResult(otherRequest.join(EXEC_answerRequestSeparator),e)}},error:errorOnUpdate});onUpdateErrorCounter=0}}function updateElementInList(a){update("NoResponse/"+crtWigiiNamespaceUrl+"/"+crtModuleName+"/updateElementInList/"+a)}function updateElementsInList(a){update("NoResponse/"+crtWigiiNamespaceUrl+"/"+crtModuleName+"/updateElementsInList/"+a)}function unselectGroups(b,a){if(arguments.length<2){a="selected"}$(b+" li."+a+", "+b+" li."+a+">div."+a+"").removeClass(a)}function clickOnGroupInGroupPanel(a){$("#groupPanel #group_"+a+"").click()}function selectGroupInGroupPanel(){unselectGroups("#groupPanel");for(i=0;i<arguments.length;i++){id=arguments[i];$("#group_"+id+", #group_"+id+">div").addClass("selected");if($("#group_"+id+" ul").length==0){$("#moduleView div.subFoldersContent, #moduleView div.subFoldersList").hide()}else{$("#moduleView div.subFoldersContent, #moduleView div.subFoldersList").show()}if($("#group_"+id+"").parent().parent().hasClass("noRights")){$("#moduleView div.folderUp").addClass("disabled")}else{$("#moduleView div.folderUp").removeClass("disabled")}}unfoldToSelectedGroup("#groupPanel");positionSelectedGroup("#groupPanel");resize_elementList();self.location="#"+crtWigiiNamespaceUrl+"/"+crtModuleName+"/folder/"+id}function selectGroup(b,c,a){if(arguments.length<3){a="selected"}unselectGroups(c,a);$("#group_"+b+", #group_"+b+">div").addClass(a);unfoldToSelectedGroup(c,a);positionSelectedGroup(c,a)}function setListenersToGroupTree(b,a){if(arguments.length<2){a="selected"}$(b+" li:not(.disabled) .menu").click(function(c){$(b+" .over").removeClass("over");$(this).closest("div").addClass("over");positionElementOnDom($(b+">.cm"),$(this),"fromLeft",5,false,true);$(b+">.cm div.write, "+b+">.cm div.admin").hide();if($(this).parent().parent().hasClass("readOnly")){$(b+">.cm div.readOnly").show()}if($(this).parent().parent().hasClass("share")){$(b+">.cm div.share").show()}if($(this).parent().parent().hasClass("write")){$(b+">.cm div.write").show()}if($(this).parent().parent().hasClass("admin")){$(b+">.cm div.admin").show()}if($(this).parent().parent().hasClass("level1")){$(b+">.cm div.level1").hide()}if($(this).parent().parent().hasClass("trashbin")){$("#cm_emptyGroup").hide()}$(b+">.cm").show();c.stopPropagation()});$(b+">.cm").mouseleave(function(){$(b+" li>div").removeClass("over");$(this).hide()});$(b+">.cm").click(function(c){$(b+" li>div").removeClass("over");$(this).hide();c.stopPropagation()});$(b+">.cm>div").bind("contextmenu",function(c){c.stopPropagation();return false});$(b+" li>div>a.H").click(function(c){$(this).parent().click();c.stopPropagation();return false});$(b+" li:not(.disabled)").click(function(f){selectGroup($(this).attr("id").split("_")[1],b,a);var c=$(">div>span.with-ul-hidden",this);if(c.length>0){c.click()}f.stopPropagation()});$(b+" li:not(.disabled)").bind("contextmenu",function(c){$(">div>.menu",this).click();c.stopPropagation();return false});$(b+" li:not(.disabled) span.folder").click(function(f){var c=$(this).parent().nextAll("ul");if(c.length>0){$(this).toggleClass("with-ul-hidden").toggleClass("with-ul-displayed");c.toggle()}else{$(this).parent().click()}f.stopPropagation()});$(b+" li>div>a.H").hover(function(){hideHelp();showHelp($(this),$(this).nextAll(".description").html(),20,"fromCenter",500)},function(){hideHelp()});$(b+" li>div>span.folder").addClass("without-ul");$(b+" li:has(ul)>div>span.folder").removeClass("without-ul").addClass("with-ul-displayed");$(b+" li:has(>ul.n)>div>span.folder").removeClass("without-ul").removeClass("with-ul-displayed").addClass("with-ul-hidden");setListnerForGroupDragAndDrop(b,b+" li.admin:not(.level1)",b+" li.write>div",a)}function setListnerForGroupDragAndDrop(e,b,c,a){if(arguments.length<4){a="selected"}$(b).draggable({scroll:true,cursorAt:{top:5,left:-10},helper:function(g){var f="";if($(this).hasClass("folder")){f=$(this).text()}else{f=$(this).find(">div>a").text()}return $('<div class="ui-widget ui-corner-all SBIB" style="padding:5px;">'+f+"</div>")}});$(c).droppable({accept:"#moduleView .dataList tr:not(.folder), #moduleView .dataList tr.folder.admin:not(.level1), #moduleView .dataBlog div.el, #moduleView .dataBlog div.folder.admin:not(level1), "+e+" li.admin",hoverClass:"SBIB",tolerance:"pointer",greedy:true,drop:function(j,l){if(l.draggable.hasClass("admin")){var g=l.draggable;var f="";var k=null;if($(this).hasClass("folder")){k=$(this);f=k.text()}else{k=$(this).parent();f=k.find(">div>a").text()}jYescancel(DIALOG_doYouWantToMoveThisFolderUnderParent+f,null,function(m){if(m===true){setVis("busyDiv",true);$.post("UPDATE/"+crtContextId+"/__/elementDialog/"+crtWigiiNamespaceUrl+"/Admin/groupEdit/"+crtModuleName+"/"+g.attr("id").split("_")[1]+"/"+e.replace("#",""),{isInitiatedFromDragDrop:true,groupParent_value:k.attr("id").split("_")[1],idForm:"editGroup_form",action:"check"},function(n,o){parseUpdateResult(n,o);if(e.replace("#","")=="groupPanel"){clickOnGroupInGroupPanel(g.attr("id").split("_")[1])}else{selectGroup(g.attr("id").split("_")[1],e,a)}})}else{if(m===null){}}})}else{var g=l.draggable;var f="";var k=null;if($(this).hasClass("folder")){k=$(this);f=k.text()}else{k=$(this).parent();f=k.find(">div>a").text()}$.alerts.noButton=DIALOG_keepInBoth;$.alerts.okButton=DIALOG_move;jConfirm("&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"+DIALOG_doYouWantToMoveOrKeepInBoth+f+"?&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;",null,function(m){if(m===true){if(g.hasClass("M")){setVis("busyDiv",true);$.post("UPDATE/"+crtContextId+"/__/confirmationDialog/"+crtWigiiNamespaceUrl+"/"+crtModuleName+"/element/setGroupsContainingElements/multiple/drag",{changeToSelected:k.attr("id").split("_")[1],changeToUnselected:($(e+" li.selected").attr("id")?$(e+" li.selected").attr("id").split("_")[1]:"all")},parseUpdateResult)}else{setVis("busyDiv",true);$.post("UPDATE/"+crtContextId+"/__/confirmationDialog/"+crtWigiiNamespaceUrl+"/"+crtModuleName+"/element/setGroupsContainingElement/"+g.attr("id").split("_")[1]+"/drag",{actual:k.attr("id").split("_")[1],original:($(e+" li.selected").attr("id")?$(e+" li.selected").attr("id").split("_")[1]:"all")},parseUpdateResult)}}else{if(m===null){}else{if(m===false){if(g.hasClass("M")){setVis("busyDiv",true);$.post("UPDATE/"+crtContextId+"/__/confirmationDialog/"+crtWigiiNamespaceUrl+"/"+crtModuleName+"/element/setGroupsContainingElements/multiple/drag",{changeToSelected:k.attr("id").split("_")[1],changeToUnselected:""},parseUpdateResult)}else{setVis("busyDiv",true);$.post("UPDATE/"+crtContextId+"/__/confirmationDialog/"+crtWigiiNamespaceUrl+"/"+crtModuleName+"/element/setGroupsContainingElement/"+g.attr("id").split("_")[1]+"/drag",{actual:k.attr("id").split("_")[1],original:""},parseUpdateResult)}}}}});$.alerts.noButton="&nbsp;No&nbsp;";$.alerts.okButton="&nbsp;Ok&nbsp;"}j.stopPropagation()}})}crtGroupSelectorId=null;crtMultipleSelectionDialogKeep=false;function setListenersToGroupPanel(a){if($("#keepNotifyButton").length){$("#keepNotifyButton").click(openKeepNotifiedDialog)}$("#groupPanel li.noRights, #groupPanel li.noRights>div").addClass("disabled");setListenersToGroupTree("#groupPanel");$("#groupPanel>.collapse").click(function(){$("#groupPanel").data("userClickCollapse",true);if($("#groupPanel>ul#group_0:hidden").length){$("#groupPanel>ul#group_0").show();$("#groupPanel>.keepNotify").show();positionSelectedGroup("#groupPanel");$(this).html("&laquo;")}else{$("#groupPanel>ul#group_0").hide();$("#groupPanel>.keepNotify").hide();$(this).html("&raquo;")}resize_elementList();resize_coverPage();resize_portal()});$("#dockingContainer>.collapse").click(function(){var c=$("#dockingContainer"),b=$("#moduleView");$(this).find("span").data("userClickCollapse",true);if(c.find("#moduleView:hidden").length){b.show();$(this).find("span").html("&laquo;")}else{b.hide();$(this).find("span").html("&raquo;")}resize_elementList();resize_coverPage();resize_portal()});$("#groupPanel li span.folder").click(function(){resize_elementList()});$("#groupPanel li").click(function(f){resize_elementList();var c=$(this).attr("id").split("_")[1];self.location="#"+crtWigiiNamespaceUrl+"/"+crtModuleName+"/folder/"+c;if(!crtMultipleSelectionDialogKeep&&crtGroupSelectorId!=c&&$("#multipleDialog .multipleSelectionNb").length&&$("#multipleDialog .multipleSelectionNb").text()!="0"){$.alerts.noButton="&nbsp;"+DIALOG_keepSelectionLabel+"&nbsp;";$.alerts.okButton="&nbsp;"+DIALOG_discardSelectionLabel+"&nbsp;";var b=$(">div>a.H",this).attr("href").replace("#","");jConfirm(a,null,function(e){if(e===true){$(".ui-dialog-titlebar-close",$("#multipleDialog").closest(".ui-dialog")).click();updateThroughCache("moduleView",b,"NoAnswer/"+crtWigiiNamespaceUrl+"/"+crtModuleName+"/groupSelectorPanel/selectGroup/"+c+"",1,1)}else{if(e===null){c=crtGroupSelectorId;$("#groupPanel #group_"+c).click()}else{if(e===false){crtMultipleSelectionDialogKeep=true;updateThroughCache("moduleView",b,"NoAnswer/"+crtWigiiNamespaceUrl+"/"+crtModuleName+"/groupSelectorPanel/selectGroup/"+c+"",1,1)}}}crtGroupSelectorId=c});$.alerts.noButton="&nbsp;No&nbsp;";$.alerts.okButton="&nbsp;Ok&nbsp;"}else{updateThroughCache("moduleView",$(">div>a.H",this).attr("href").replace("#",""),"NoAnswer/"+crtWigiiNamespaceUrl+"/"+crtModuleName+"/groupSelectorPanel/selectGroup/"+c+"",1,1);crtGroupSelectorId=c}f.stopPropagation()});$("#groupPanel ul#group_0").click(function(){if($(this).children("li:not(.noRights)").length>0){unselectGroups("#groupPanel");var b=+$(this).attr("id").split("_")[1];self.location="#"+crtWigiiNamespaceUrl+"/"+crtModuleName+"/folder/"+b;updateThroughCache("moduleView",$(this).attr("href").replace("#",""),"NoAnswer/"+crtWigiiNamespaceUrl+"/"+crtModuleName+"/groupSelectorPanel/selectGroup/"+b+"",1,1)}else{$("li:not(.noRights):first").click()}});$("#groupPanel>.cm>div").click(function(){var b=$("#groupPanel li>div.over").parent();var c=b.attr("id").split("_")[1];if($(this).attr("id")=="cm_exit"){return true}if($(this).attr("id")=="cm_select"){b.click();return true}var e="elementDialog";if(isWorkzoneViewDocked()){e="confirmationDialog"}if($(this).attr("id")=="cm_findDuplicatesIn"){b.click();update("organizeDialog/"+crtWigiiNamespaceUrl+"/"+crtModuleName+"/findDuplicatesIn/");return true}if($(this).attr("id")=="cm_add"){update("elementDialog/"+crtWigiiNamespaceUrl+"/"+crtModuleName+"/element/add/"+c);b.click();return true}if($(this).attr("id")=="cm_renameGroup"){update(e+"/"+crtWigiiNamespaceUrl+"/Admin/groupEdit/"+crtModuleName+"/"+c+"/groupPanel");b.click();return true}if($(this).attr("id")=="cm_deleteGroup"){update(e+"/"+crtWigiiNamespaceUrl+"/Admin/groupDelete/"+crtModuleName+"/"+c+"/groupPanel");b.click();return true}if($(this).attr("id")=="cm_emptyGroup"){update(e+"/"+crtWigiiNamespaceUrl+"/Admin/groupEmpty/"+crtModuleName+"/"+c+"/groupPanel");b.click();return true}if($(this).attr("id")=="cm_createSubGroup"){update(e+"/"+crtWigiiNamespaceUrl+"/Admin/groupNew/"+crtModuleName+"/"+c+"/groupPanel");b.click();return true}if($(this).attr("id")=="cm_copyGroup"){update("elementDialog/"+crtWigiiNamespaceUrl+"/Admin/groupNewCopy/"+crtModuleName+"/"+c+"/groupPanel");b.click();return true}if($(this).attr("id")=="cm_groupDetail"){update("elementDialog/"+crtWigiiNamespaceUrl+"/Admin/groupDetail/"+crtModuleName+"/"+c+"/groupPanel");return true}if($(this).attr("id")=="cm_portal"){update("elementDialog/"+crtWigiiNamespaceUrl+"/Admin/groupPortal/"+crtModuleName+"/"+c+"/groupPanel");return true}if($(this).attr("id")=="cm_htmlContent"){update("elementDialog/"+crtWigiiNamespaceUrl+"/Admin/groupHtmlContent/"+crtModuleName+"/"+c+"/groupPanel");return true}if($(this).attr("id")=="cm_subscription"){update(e+"/"+crtWigiiNamespaceUrl+"/Admin/groupSubscription/"+crtModuleName+"/"+c+"/groupPanel");return true}if($(this).attr("id")=="cm_emailNotification"){update(e+"/"+crtWigiiNamespaceUrl+"/Admin/groupEmailNotification/"+crtModuleName+"/"+c+"/groupPanel");return true}if($(this).attr("id")=="cm_xmlPublish"){update(e+"/"+crtWigiiNamespaceUrl+"/Admin/groupXmlPublish/"+crtModuleName+"/"+c+"/groupPanel");return true}})}function setListenersToIndicator(){$("#indicators .closeIndicators").click(function(){$("#indicators div.indicator").hide();$("#indicators div.closeIndicators").hide();$("#indicators div.showIndicators").show();update("NoAnswer/"+crtWigiiNamespaceUrl+"/"+crtModuleName+"/closeIndicators")});$("#indicators .showIndicators").click(function(){update("NoAnswer/"+crtWigiiNamespaceUrl+"/"+crtModuleName+"/showIndicators")});$("#indicators div.indicator:not(.system)").mouseenter(function(){$("#indicators div.indicator .closeIndicator").stop().remove();$(this).append('<div class="closeIndicator" style="font-size:11px;float:right;padding:3px;margin-top:-8px;margin-right:-5px;margin-left:2px;cursor:pointer;display:none;">x</div>');$(".closeIndicator",this).show().click(function(){$(this).parent().fadeOut(800,function(){$(this).remove()});update("NoAnswer/"+crtWigiiNamespaceUrl+"/"+crtModuleName+"/closeIndicator/"+$(this).parent().attr("id"))})});$("#indicators div.indicator").mouseleave(function(){$(".closeIndicator",this).stop().fadeOut(500,function(){$(this).remove()})})}menuTimeout=new Object();function setListenersToMenu(c,g,a,f,b,e){if(arguments.length<5||b==null){b=""}if(arguments.length<6){e=false}if(!e){$("#"+c).mouseenter(function(k){clearTimeout(menuTimeout[g]);var j=$(this);menuTimeout[g]=setTimeout(function(){positionElementOnDom($("#"+g),j,"fromLeft",26,true);var l=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight;$("#"+g).css("overflow-y","auto").css("max-height",l-20);$("#"+g).show().scrollTop(0)},150);k.stopPropagation()}).click(function(j){j.stopPropagation();j.preventDefault();return false})}else{$("#"+c).click(function(k){clearTimeout(menuTimeout[g]);positionElementOnDom($("#"+g),$(this),"fromLeft",26);var j=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight;$("#"+g).css("overflow-y","auto").css("max-height",j-20);$("#"+g).show().scrollTop(0);k.stopPropagation();k.preventDefault();return false})}$("#"+c).mouseleave(function(j){clearTimeout(menuTimeout[g]);menuTimeout[g]=setTimeout(function(){$("#"+g).hide()},300)});$("#"+g).mouseleave(function(){clearTimeout(menuTimeout[g]);menuTimeout[g]=setTimeout(function(){$("#"+g).hide()},300)}).mouseenter(function(){clearTimeout(menuTimeout[g])});$("#"+g+">div").click(function(j){if(!$(this).hasClass("exit")){if(a!=null&&f!=null){update(a+"/"+crtWigiiNamespaceUrl+"/"+crtModuleName+"/"+f+"/"+$("a:first",this).attr("href").replace("#","")+"/"+b)}}clearTimeout(menuTimeout[g]);$("#"+g).hide();j.stopPropagation();return false})}function setListenersToMenuBsp(c,g,a,f,b,e){$("#"+c+" li a").click(function(){if($(this).hasClass("changeOrder")){order=($(this).hasClass("ASC")?false:true);update(a+"/"+crtWigiiNamespaceUrl+"/"+crtModuleName+"/"+f+"/"+$(this).attr("href").replace("#","")+"/"+order);return false}update(a+"/"+crtWigiiNamespaceUrl+"/"+crtModuleName+"/"+f+"/"+$(this).attr("href").replace("#","")+"/"+b);return false})}function setListenersToRows(c,f,e,b){if(arguments.length<4){var b="#moduleView .list>.cm"}if(arguments.length<3){var e="#moduleView .dataList tr.folder"}if(arguments.length<2){var f="#moduleView .dataList tr.el"}if(arguments.length<1){var c="#moduleView .list"}var a=".dragHandler";if($(f+" .dragHandler").length==0){a=null}$(f+":not(.readOnly)").draggable({scroll:true,cursorAt:{top:5,left:-10},handle:a,helper:function(g){if($(this).hasClass("M")){return $('<div class="ui-widget ui-corner-all SBIB" style="padding:5px;">'+$("#multipleDialog .summary").html()+"</div>")}return $('<div class="ui-widget ui-corner-all SBIB" style="padding:5px;">'+$(this).children().map(function(){if($(this).text()&&$(this).is(":visible")){return $(this).text()}else{return null}}).get().join(" ").substring(0,30)+"...</div>")}});setListnerForGroupDragAndDrop("#groupPanel",e+".admin:not(.level1)",e+".write");$(f).unbind("click");$(f).click(function(g){$(f).removeClass("S");$(this).addClass("S");idItem=$(this).attr("id").split("_")[1];self.location="#"+crtWigiiNamespaceUrl+"/"+crtModuleName+"/item/"+idItem;updateThroughCache("elementDialog",$(this).attr("href").replace("#",""),"elementDialog/"+crtWigiiNamespaceUrl+"/"+crtModuleName+"/element/detail/"+idItem+"")});$(f).unbind("contextmenu");$(f).bind("contextmenu",function(g){hideHelp();$(".menu",this).click();positionElementOnMouse($(b),g,"fromRight",null,5);return false});ModuleView_dataListIsMouseDrag=false;$("#moduleView .dataList tr.el>td>div").unbind();$("#moduleView .dataList tr.el>td>div").mouseenter(function(g){if($(this).hasClass("helpWidth")){w=$(this).attr("class").match(/ help_(.*) /g)[0].replace(/ help_(.*) /g,"$1")}else{w=Math.min(400,Math.max(200,$(this).width()))}showHelp(this,$(this).html(),30,"fromLeft",500,w,60000,g)}).mouseleave(function(g){hideHelp()}).click(function(j){if(j.ctrlKey){ModuleView_dataListIsMouseDrag=true;if($("#summaryDialog:visible").length==0){if(!$("#summaryDialog").hasClass("ui-draggable")){$("#summaryDialog").draggable({handle:".handler",cursor:"crosshair"})}$("#summaryDialog").show()}if($("#summaryDialog>textarea.content").val()!=""){$("#summaryDialog>textarea.content").val($("#summaryDialog>textarea.content").val()+", ")}$("#summaryDialog>textarea.content").val($("#summaryDialog>textarea.content").val()+$(this).text()).focus();$("#summaryDialog>textarea.content").scrollTop("9999999");j.stopPropagation();var g;if(document.selection&&document.selection.empty){document.selection.empty()}else{if(window.getSelection){g=window.getSelection();if(g&&g.removeAllRanges){g.removeAllRanges()}}}return false}else{ModuleView_dataListIsMouseDrag=false}});$(f+" div.value div.file a").unbind();$(f+" div.value div.file a").click(function(g){g.stopPropagation()});$(f+" div.max").unbind();$(f+" div.max").click(function(j){var g=$(this).closest(f);if(g.hasClass("max")){g.removeClass("max");g.css("min-width",0);resize_elementList()}else{g.addClass("max");g.css("min-width",g.width());g.width("auto")}j.stopPropagation()});$(f+" div.menu").unbind();$(f+" div.menu").click(function(g){$(this).closest(f).addClass("over");positionElementOnDom($(b),$(this),"fromRight",5);elEnableState=$(".elEnableState",this).html();elState=$(".elState",this).html();wigii().context.crtElementState=Number(elState);if($(this).parent().parent().hasClass("readOnly")){$(b+" div.write").hide()}else{$(b+" div.write").show()}if($("#moduleView .toolBar .addNewElement.disabledBg").length>0){$(b+" #cm_addElementInList").hide()}else{$(b+" #cm_addElementInList").show()}if(elState&2){$(b+" #cm_edit").hide();$(b+" #cm_delete").hide();if(!(elEnableState&2048)){$(b+" #cm_organize").hide()}}if(elEnableState&1){s=$(b+" #cm_lock");if(elState&1){s.addClass("checked").removeClass("unchecked")}else{s.addClass("unchecked").removeClass("checked")}}else{$(b+" #cm_lock").hide()}if(elEnableState&2){s=$(b+" #cm_block");if(elState&2){s.addClass("checked").removeClass("unchecked")}else{s.addClass("unchecked").removeClass("checked")}}else{$(b+" #cm_block").hide()}if(elEnableState&4){s=$(b+" #cm_state_important1");if(elState&4){s.addClass("checked").removeClass("unchecked")}else{s.addClass("unchecked").removeClass("checked")}}else{$(b+" #cm_state_important1").hide()}if(elEnableState&8){s=$(b+" #cm_state_important2");if(elState&8){s.addClass("checked").removeClass("unchecked")}else{s.addClass("unchecked").removeClass("checked")}}else{$(b+" #cm_state_important2").hide()}if(elEnableState&16){s=$(b+" #cm_finalize");if(elState&16){s.addClass("checked").removeClass("unchecked")}else{s.addClass("unchecked").removeClass("checked")}}else{$(b+" #cm_finalize").hide()}if(elEnableState&32){s=$(b+" #cm_approve");if(elState&32){s.addClass("checked").removeClass("unchecked")}else{s.addClass("unchecked").removeClass("checked")}}else{$(b+" #cm_approve").hide()}if(elEnableState&64){s=$(b+" #cm_dismiss");if(elState&64){s.addClass("checked").removeClass("unchecked")}else{s.addClass("unchecked").removeClass("checked")}}else{$(b+" #cm_dismiss").hide()}if(elEnableState&128){s=$(b+" #cm_state_archived");if(elState&128){s.addClass("checked").removeClass("unchecked")}else{s.addClass("unchecked").removeClass("checked")}}else{$(b+" #cm_state_archived").hide()}if(elEnableState&256){s=$(b+" #cm_state_deprecated");if(elState&256){s.addClass("checked").removeClass("unchecked")}else{s.addClass("unchecked").removeClass("checked")}}else{$(b+" #cm_state_deprecated").hide()}if(elEnableState&512){s=$(b+" #cm_hide");if(elState&512){s.addClass("checked").removeClass("unchecked")}else{s.addClass("unchecked").removeClass("checked")}}else{$(b+" #cm_hide").hide()}if(elEnableState&1024){$(b+" #cm_delete").hide()}$(b).show();g.stopPropagation()});$(f+" div.mul").unbind();$(f+" div.mul, "+e+" div.mul").click(function(g){if($(this).parent().parent().hasClass("folder")){clickFolderLineInMultipleSelectionMode($(this).closest(e))}else{clickLineInMultipleSelectionMode($(this).closest(f))}g.stopPropagation()});$(c+" .new").removeClass("new")}function setListenersToElementList(){$("#moduleView .list .headerList div.mul").click(function(b){$(this).addClass("M");selectAllMultipleSelect();setTimeout(function(){$("#moduleView .list .headerList div.mul").removeClass("M")},500);b.stopPropagation()});$("#moduleView .dataList tr.folder div.folderUp").click(function(b){$("#groupPanel #group_"+$(this).parent().parent().attr("id").split("_")[1]).click();b.stopPropagation()});$("#moduleView .dataList tr.folder").click(function(b){$("#groupPanel #group_"+$(this).attr("id").split("_")[1]).click();b.stopPropagation()});$("#moduleView .dataList tr.folder div.subFoldersContent").click(function(b){tempGroupId=$("#groupPanel li.selected");if(tempGroupId.length>0){tempGroupId=tempGroupId.attr("id").split("_")[1]}else{tempGroupId=0}updateThroughCache("moduleView",$(this).attr("href").replace("#",""),"NoAnswer/"+crtWigiiNamespaceUrl+"/"+crtModuleName+"/groupSelectorPanel/selectGroupAndChildren/"+tempGroupId+"",0,1);b.stopPropagation()});$("#moduleView .dataList tr.folder div.subFoldersList").click(function(b){if($("#groupPanel li.selected").length>0){$("#groupPanel li.selected").click()}else{$("#groupPanel ul#group_0").click()}b.stopPropagation()});$("#moduleView .headerList>div:not(.noSorting)").click(function(){fieldName=$(this).attr("class");fieldName=fieldName.match("key_([^ ]*)");if(!fieldName){return}fieldName=fieldName[1];$("#moduleView .headerList>div").not($(this)).removeClass("DESC").removeClass("ASC");if(!($(this).hasClass("ASC"))&&!($(this).hasClass("DESC"))){if($(this).hasClass("defaultSorted")){sortedDir=$(this).attr("class").match("defaultSorted_([^ ]*)")[1];$(this).addClass(sortedDir)}else{$(this).addClass("ASC")}}else{$(this).toggleClass("DESC").toggleClass("ASC")}update("moduleView/"+crtWigiiNamespaceUrl+"/"+crtModuleName+"/changeSortByKey/"+fieldName+"/"+$(this).hasClass("ASC"))});window.customHeaderSize=[];$('#moduleView .headerList>div[class^="key_"]').resizable({handles:"e",create:function(b,c){$(".ui-resizable-e").css("cursor","col-resize").click(function(e){e.stopImmediatePropagation()})},start:function(b,c){$("#moduleView .headerList>div").each(function(e){$(this).removeClass("noWidth")})},resize:function(f,g){var k="px";var j=$("#moduleView .headerList>div").index(this);this.style.width=g.size.width+"px";var b=$(".dataList colgroup").children();b[j].style.width=g.size.width+17+k;var e=a(this);if(window.customHeaderSize){for(var c in window.customHeaderSize){if(c!=e){window.customHeaderSize[c].obj.style.width=window.customHeaderSize[c].width+k}}}},stop:function(b,c){var e=a(this);window.customHeaderSize[e]={obj:this,width:c.size.width};this.style.width=c.size.width;update("NoAnswer/"+crtWigiiNamespaceUrl+"/"+crtModuleName+"/saveListViewUIPref/"+e+"/width/"+c.size.width);resize_elementList()}});function a(c){var b=c.className;b=b.match("key_([^ ]*)");b=b[1].replace(/(value)|__element/i,"");b=b.replace("(","").replace("(","");b=b.replace(")","").replace(")","");return b}$("#moduleView .list>.cm").mouseleave(function(){$("#moduleView .dataList tr").removeClass("over");$(this).hide()});$("#moduleView .list>.cm").click(function(){$("#moduleView .dataList tr").removeClass("over");$(this).hide()});$("#moduleView .list>.cm>div").click(function(){if($(this).attr("id")=="cm_exit"){return true}if($(this).attr("id")=="cm_open"){$("#moduleView .dataList tr.el.over").click();return true}idItem=$("#moduleView .dataList tr.el.over").attr("id").split("_")[1];if($(this).attr("id")=="cm_addElementInList"){$("#searchBar .toolbarBox .addNewElement").click();return true}$("#moduleView .dataList tr.S").removeClass("S");$("#row_"+idItem).addClass("S");self.location="#"+crtWigiiNamespaceUrl+"/"+crtModuleName+"/item/"+idItem;if($(this).hasClass("unchecked")){checked=1;$(this).removeClass("unchecked").addClass("checked")}else{if($(this).hasClass("checked")){checked=0;$(this).removeClass("checked").addClass("unchecked")}else{checked=-1}}if($(this).attr("id")=="cm_edit"){update("elementDialog/"+crtWigiiNamespaceUrl+"/"+crtModuleName+"/element/edit/"+idItem);return true}if($(this).attr("id")=="cm_delete"){var b="elementDialog";if(isWorkzoneViewDocked()){b="confirmationDialog"}update(b+"/"+crtWigiiNamespaceUrl+"/"+crtModuleName+"/element/delete/"+idItem+"/elementDialog");return true}if($(this).attr("id")=="cm_copy"){copyWithOrganize("elementDialog/"+crtWigiiNamespaceUrl+"/"+crtModuleName,idItem);return true}if($(this).attr("id")=="cm_organize"){openOrganizeDialog(idItem);return true}if($(this).attr("id")=="cm_lock"){if(checked>=0){update("NoAnswer/"+crtWigiiNamespaceUrl+"/"+crtModuleName+"/setElementState/"+idItem+"/locked/"+checked+"/")}return true}if($(this).attr("id")=="cm_block"){if(checked>=0){update("NoAnswer/"+crtWigiiNamespaceUrl+"/"+crtModuleName+"/setElementState/"+idItem+"/blocked/"+checked+"/")}return true}if($(this).attr("id")=="cm_state_important1"){if(checked>=0){update("NoAnswer/"+crtWigiiNamespaceUrl+"/"+crtModuleName+"/setElementState/"+idItem+"/important1/"+checked+"/")}return true}if($(this).attr("id")=="cm_state_important2"){if(checked>=0){update("NoAnswer/"+crtWigiiNamespaceUrl+"/"+crtModuleName+"/setElementState/"+idItem+"/important2/"+checked+"/")}return true}if($(this).attr("id")=="cm_finalize"){if(checked>=0){update("NoAnswer/"+crtWigiiNamespaceUrl+"/"+crtModuleName+"/setElementState/"+idItem+"/finalized/"+checked+"/")}return true}if($(this).attr("id")=="cm_approve"){if(checked>=0){update("NoAnswer/"+crtWigiiNamespaceUrl+"/"+crtModuleName+"/setElementState/"+idItem+"/approved/"+checked+"/")}return true}if($(this).attr("id")=="cm_dismiss"){if(checked>=0){update("NoAnswer/"+crtWigiiNamespaceUrl+"/"+crtModuleName+"/setElementState/"+idItem+"/dismissed/"+checked+"/")}return true}if($(this).attr("id")=="cm_state_archived"){if(checked>=0){update("NoAnswer/"+crtWigiiNamespaceUrl+"/"+crtModuleName+"/setElementState/"+idItem+"/archived/"+checked+"/")}return true}if($(this).attr("id")=="cm_state_deprecated"){if(checked>=0){update("NoAnswer/"+crtWigiiNamespaceUrl+"/"+crtModuleName+"/setElementState/"+idItem+"/deprecated/"+checked+"/")}return true}if($(this).attr("id")=="cm_hide"){if(checked>=0){update("NoAnswer/"+crtWigiiNamespaceUrl+"/"+crtModuleName+"/setElementState/"+idItem+"/hidden/"+checked+"/")}return true}});setListenersToLoadMoreLines("getNextElementInList","#moduleView .list","#moduleView .list .dataList table tbody");setListenersToRows()}function setListenersToElementBlog(){$("#moduleView .dataBlog div.groupList div.folder:not(.subFoldersContent, .subFoldersList)").click(function(a){$("#groupPanel #group_"+$(this).attr("id").split("_")[1]).click();a.stopPropagation()});$("#moduleView .dataBlog div.groupList div.subFoldersContent").click(function(a){tempGroupId=$("#groupPanel li.selected");if(tempGroupId.length>0){tempGroupId=tempGroupId.attr("id").split("_")[1]}else{tempGroupId=0}updateThroughCache("moduleView",$(this).attr("href").replace("#",""),"NoAnswer/"+crtWigiiNamespaceUrl+"/"+crtModuleName+"/groupSelectorPanel/selectGroupAndChildren/"+tempGroupId+"",0,1);a.stopPropagation()});$("#moduleView .dataBlog div.groupList div.subFoldersList").click(function(a){if($("#groupPanel li.selected").length>0){$("#groupPanel li.selected").click()}else{$("#groupPanel ul#group_0").click()}a.stopPropagation()});$("#moduleView .blog>.cm").mouseleave(function(){$("#moduleView .dataBlog div.el").removeClass("over");$(this).hide()});$("#moduleView .blog>.cm").click(function(){$("#moduleView .dataBlog div.el").removeClass("over");$(this).hide()});$("#moduleView .blog>.cm>div").click(function(){if($(this).attr("id")=="cm_exit"){return true}if($(this).attr("id")=="cm_open"){$("#moduleView .dataBlog div.el.over").click();return true}idItem=$("#moduleView .dataBlog div.el.over").attr("id").split("_")[1];if($(this).attr("id")=="cm_addElementInList"){$("#searchBar .toolbarBox .addNewElement").click();return true}$("#moduleView .dataBlog div.S").removeClass("S");$("#row_"+idItem).addClass("S");self.location="#"+crtWigiiNamespaceUrl+"/"+crtModuleName+"/item/"+idItem;if($(this).hasClass("unchecked")){checked=1;$(this).removeClass("unchecked").addClass("checked")}else{if($(this).hasClass("checked")){checked=0;$(this).removeClass("checked").addClass("unchecked")}else{checked=-1}}if($(this).attr("id")=="cm_edit"){update("elementDialog/"+crtWigiiNamespaceUrl+"/"+crtModuleName+"/element/edit/"+idItem);return true}if($(this).attr("id")=="cm_delete"){var a="elementDialog";if(isWorkzoneViewDocked()){a="confirmationDialog"}update(a+"/"+crtWigiiNamespaceUrl+"/"+crtModuleName+"/element/delete/"+idItem+"/elementDialog");return true}if($(this).attr("id")=="cm_copy"){copyWithOrganize("elementDialog/"+crtWigiiNamespaceUrl+"/"+crtModuleName,idItem);return true}if($(this).attr("id")=="cm_organize"){openOrganizeDialog(idItem);return true}if($(this).attr("id")=="cm_lock"){if(checked>=0){update("NoAnswer/"+crtWigiiNamespaceUrl+"/"+crtModuleName+"/setElementState/"+idItem+"/locked/"+checked+"/")}return true}if($(this).attr("id")=="cm_block"){if(checked>=0){update("NoAnswer/"+crtWigiiNamespaceUrl+"/"+crtModuleName+"/setElementState/"+idItem+"/blocked/"+checked+"/")}return true}if($(this).attr("id")=="cm_state_important1"){if(checked>=0){update("NoAnswer/"+crtWigiiNamespaceUrl+"/"+crtModuleName+"/setElementState/"+idItem+"/important1/"+checked+"/")}return true}if($(this).attr("id")=="cm_state_important2"){if(checked>=0){update("NoAnswer/"+crtWigiiNamespaceUrl+"/"+crtModuleName+"/setElementState/"+idItem+"/important2/"+checked+"/")}return true}if($(this).attr("id")=="cm_finalize"){if(checked>=0){update("NoAnswer/"+crtWigiiNamespaceUrl+"/"+crtModuleName+"/setElementState/"+idItem+"/finalized/"+checked+"/")}return true}if($(this).attr("id")=="cm_approve"){if(checked>=0){update("NoAnswer/"+crtWigiiNamespaceUrl+"/"+crtModuleName+"/setElementState/"+idItem+"/approved/"+checked+"/")}return true}if($(this).attr("id")=="cm_dismiss"){if(checked>=0){update("NoAnswer/"+crtWigiiNamespaceUrl+"/"+crtModuleName+"/setElementState/"+idItem+"/dismissed/"+checked+"/")}return true}if($(this).attr("id")=="cm_state_archived"){if(checked>=0){update("NoAnswer/"+crtWigiiNamespaceUrl+"/"+crtModuleName+"/setElementState/"+idItem+"/archived/"+checked+"/")}return true}if($(this).attr("id")=="cm_state_deprecated"){if(checked>=0){update("NoAnswer/"+crtWigiiNamespaceUrl+"/"+crtModuleName+"/setElementState/"+idItem+"/deprecated/"+checked+"/")}return true}if($(this).attr("id")=="cm_hide"){if(checked>=0){update("NoAnswer/"+crtWigiiNamespaceUrl+"/"+crtModuleName+"/setElementState/"+idItem+"/hidden/"+checked+"/")}return true}});setListenersToLoadMoreLines("getNextElementInBlog","#moduleView .blog","#moduleView .blog .dataBlog");setListenersToRows("#moduleView .blog","#moduleView .dataBlog div.el","#moduleView .dataBlog div.folder","#moduleView .blog>.cm")}function setListenersToLoadMoreLines(action,selector,appendToSelector){$(selector+">.nbItemsInList>.loadMoreLines").click(function(){url=SITE_ROOT+"useContext/"+crtContextId+EXEC_requestSeparator+crtWigiiNamespaceUrl+"/"+crtModuleName+"/"+action+"/";setVis("busyDiv",true);page=parseInt($(selector+">.nbItemsInList>.page").text())+1;$(selector+">.nbItemsInList>.page").text(page);var myAjax=new jQuery.ajax({type:"POST",url:encodeURI(url),cache:false,data:{page:page},success:function(returnText,textStatus){setVis("busyDiv",false);data=returnText.split("_X_NBNEWROWS_X_");nbLoaded=parseInt(data[1]);jsCode=data[2];data=data[0];$(selector+">.nbItemsInList>.nb").text(parseInt($(selector+">.nbItemsInList>.nb").text())+nbLoaded);if(data==""||parseInt($(selector+">.nbItemsInList>.nb").text())==parseInt($(selector+">.nbItemsInList>.total").text())){$(selector+">.nbItemsInList").html($(selector+">.nbItemsInList>.nb").html()+$(selector+">.nbItemsInList>.type").html())}$(appendToSelector).append(data);if(jsCode){eval(jsCode.replace('<script id="JSCode" type="text/javascript" > $(document).ready(function(){ ',"").replace("}); <\/script>",""))}updateCurrentModuleViewCache()},error:errorOnUpdate});onUpdateErrorCounter=0})}function matchSubFoldersInElementListToGroupPanel(){$("#moduleView .dataList tr.folder").each(function(a){if(!$("#groupPanel #group_"+$(this).attr("id").split("_")[1]+":visible").length){$(this).hide()}else{tempHtml=$("#groupPanel #group_"+$(this).attr("id").split("_")[1]+">div>span.nb").html();if(tempHtml){$("div.folder",this).next().append('<span class="R nb">'+tempHtml+"</span>")}}})}function displayLink(a,b,e,c){if(arguments.length<3){e=30;c=0}if($(a).find(".sendLinkInput").length==1){}else{b=b.replace(" ","%20");$(a).prepend('<div class="sendLinkInput ui-corner-all SBB" style="background-color:#fff;z-index:9999999;position:absolute;float:left;margin-top:'+e+"px;margin-left:"+c+'px;padding:4px;width:425px;"><input type="text" style="float:left;margin:0px;padding:2px;width:400px;" value="'+b+'" /><div class="H" style="float:left;font-size:x-small;margin-left:8px;"> X </div></div>').find("input").select().next().click(function(f){$(this).parent().remove();f.stopPropagation();return false})}}function mailToFromLink(b,a){if($("#"+b+"").parent().find(".sendLinkInput").length==1){}else{a=a.replace(" ","%20");if(isWorkzoneViewDocked()){$("#"+b+"").prepend('<div class="sendLinkInput ui-corner-all SBB" style="background-color:#fff;z-index:9999999;position:absolute;left:'+($("#searchBar .el_sendLink").position().left+$("#searchBar .el_sendLink").outerWidth()-425)+"px;top:"+(getTopHeight(true)+28)+'px;padding:4px;width:425px;"><input type="text" style="float:left;margin:0px;padding:2px;width:400px;" value="'+a+'" /><div class="H" style="float:left;font-size:x-small;margin-left:8px;"> X </div></div>').find("input").select().next().click(function(c){$(this).parent().remove();c.stopPropagation();return false})}else{$("#"+b+"").parent().prepend('<div class="sendLinkInput ui-corner-all SBB" style="background-color:#fff;z-index:9999999;position:absolute;float:left;margin-top:20px;margin-left:'+($("#"+b+"").width()-425)+'px;padding:4px;width:425px;"><input type="text" style="float:left;margin:0px;padding:2px;width:400px;" value="'+a+'" /><div class="H" style="float:left;font-size:x-small;margin-left:8px;"> X </div></div>').find("input").select().next().click(function(c){$(this).parent().remove();c.stopPropagation();return false})}}}function copyWithOrganize(c,e){var b=$("#groupPanel li.selected.write");if(b.length>0){b=b.attr("id").split("_")[1]}else{b=undefined}var a=b;prepareOrganizeDialog(function(f){if(!$(this).hasClass("disabled")){$("#organizeDialog .selected").removeClass("selected");$(this).toggleClass("selected");b=$(this).parent().attr("id").split("_")[1]}return false},function(){if(!b){jAlert(DIALOG_selectAtLeastOneGroup);return false}if($("#organizeDialog").is(":ui-dialog")){$("#organizeDialog").dialog("destroy")}invalidCache("moduleView");if(b!=a){c="NoAnswer/"+crtWigiiNamespaceUrl+"/"+crtModuleName+"/groupSelectorPanel/selectGroup/"+b+EXEC_requestSeparator+c}update(c+"/element/copy/"+e+"/"+b)});$("#organizeDialog").prev().find(".ui-dialog-title").text(DIALOG_copyToFolder);$("#organizeDialog").prepend('<div class="introduction">'+DIALOG_copyToFolder_help+"</div>");$("#organizeDialog>.groupPanel li:not(.write)").addClass("disabled noRights");$("#organizeDialog>.groupPanel li:not(.write)>div").addClass("disabled noRights");if(b){$("#organizeDialog>.groupPanel #group_"+b+", #organizeDialog>.groupPanel #group_"+b+">div").addClass("selected")}unfoldToSelectedGroupButNotChildren("#organizeDialog>.groupPanel");positionSelectedGroup("#organizeDialog>.groupPanel");if(b){$("#organizeDialog").next().find("button.ok").focus()}}function setListenersToElementDetail(l,j,n,g,b,f,c,k){if(arguments.length<4){g=false;b=null;f=null;c=null;cacheId=null}if(arguments.length<2){var j=crtWigiiNamespaceUrl;var n=crtModuleName}if(l==""){l="mainDiv"}$("#"+l+" .T>div, #"+l+" .T>a, #"+l+" .T>button").add($("a",$("#"+l+"").prev())).click(function(){if($(this).hasClass("el_edit")){update(""+l+"/"+j+"/"+n+"/element/edit/"+$(this).parent().attr("href").replace("#",""));if(isWorkzoneViewDocked()){$("#searchBar .middleBox div.T").children().remove()}return}if($(this).hasClass("el_copy")){var o=$(this).parent().attr("href").replace("#","");if(g){update(""+l+"/"+j+"/"+n+"/subelement/copy/"+f+"/"+c+"/"+o)}else{copyWithOrganize(""+l+"/"+j+"/"+n,o)}return}if($(this).hasClass("el_organize")){openOrganizeDialog($(this).parent().attr("href").replace("#",""));return}if($(this).hasClass("el_status")){if(isWorkzoneViewDocked()){$("#searchBar .elementStatusMenu").show()}else{$("#"+l+" .elementStatusMenu").show()}return}if($(this).hasClass("el_delete")){update("confirmationDialog/"+j+"/"+n+"/element/delete/"+$(this).parent().attr("href").replace("#","")+"/"+l);return}if($(this).hasClass("el_feedback")){update("feedbackDialog/"+j+"/"+n+"/giveFeedback/element/"+$(this).attr("href").replace("#",""));return false}if($(this).hasClass("el_back")){if(k){updateThroughCache("elementDialog",k,"elementDialog/"+j+"/"+n+"/element/detail/"+f+"")}else{update("elementDialog/"+j+"/"+n+"/element/detail/"+f+"")}return false}if($(this).hasClass("el_printDetails")){return}if($(this).hasClass("el_sendLink")){return}if(isWorkzoneViewDocked()&&$(this).hasClass("el_closeDetails")){manageWorkzoneViewDocked("hide");return}});if(isWorkzoneViewDocked()){var a=$("#searchBar .middleBox");if(a.length>0){a.remove();needToResize=false}var m=$("#searchBar .firstBox").after('<div class="middleBox"></div>').css("display","none").height();a=$("#searchBar .middleBox").height("auto");a.append($("#elementDialog .T").addClass("docked").css({width:""}));$("#searchBar .toolbarBox").hide();resize_groupPanel();resize_elementList();resize_calendar();resize_blog();resize_wncd();resize_workzoneViewDocked()}$("#"+l+" .elementStatusMenu").mouseleave(function(){$(this).hide()});var e=l;if(isWorkzoneViewDocked()){e="elementDialog"}$("#"+e+" .elementStatusMenu>div").click(function(o){if(!$(this).hasClass("exit")){$(this).toggleClass("checked");if($(this).hasClass("checked")){val="1"}else{val="0"}update(l+"/"+j+"/"+n+"/setElementState/"+$("#"+e+" .T").attr("href").replace("#","")+"/"+$(this).attr("href").replace("#","")+"/"+val)}else{$("#"+e+" .elementStatusMenu").hide()}o.stopPropagation()});$("#"+l+" .elementHistoric>div.label").click(function(){$(this).toggleClass("expanded").toggleClass("collapsed");$(this).next().toggle();if($(this).hasClass("expanded")){$(window).scrollTop($(window).scrollTop()+$("#"+l+" .elementHistoric").height());if(!isWorkzoneViewDocked()){resize_scrollArea(true)}}});hrefWithSiteroot2js(l,l);$("#"+l+" div.field .label").bind("contextmenu",function(o){$(this).parent().find(">.addinfo").show();return false});$("#"+l+" div.field").mouseleave(function(o){$(this).find(".addinfo").hide()})}function hrefWithSiteroot2js(a,b){$("#"+a+' a[href^="'+SITE_ROOT+'"]').each(function(){$(this).click(function(f){if(f.ctrlKey){return}if($(this).attr("target")!="_blank"){var c=$(this).attr("href");if(c.indexOf("#")!=-1){c=c.replace(SITE_ROOT+"#","");if(!$(this).attr("href").match(crtWigiiNamespaceUrl)||!$(this).attr("href").match(crtModuleName)){if($(this).attr("href").match("item/")){c=c.replace("/item/","/navigate/item/")}if($(this).attr("href").match("folder/")){c=c.replace("/folder/","/navigate/folder/")}update("mainDiv/"+c)}else{if($(this).attr("href").match("item/")){c=c.replace("/item/","/element/detail/");update(""+b+"/"+c)}if($(this).attr("href").match("folder/")){c=c.replace("/folder/","/groupSelectorPanel/selectGroup/");update("NoAnswer/"+c)}if($(this).attr("href").match("find/")){update("mainDiv/"+c)}}}}})});$("#"+a+" div.field[data-wigii-href] div.value").each(function(){$(this).addClass("H").click(function(){window.open($(this).parent().attr("data-wigii-href"))})});$("#"+a+" div.field[data-wigii-href-self] div.value").each(function(){$(this).addClass("H");var c=$(this).parent().attr("data-wigii-href-self");if(c.indexOf(SITE_ROOT)===0){$(this).click(function(g){if(g.ctrlKey){window.open(c)}else{var f=c;if(f.indexOf("#")!=-1){f=f.replace(SITE_ROOT+"#","");if(!c.match(crtWigiiNamespaceUrl)||!c.match(crtModuleName)){if(c.match("item/")){f=f.replace("/item/","/navigate/item/")}if(c.match("folder/")){f=f.replace("/folder/","/navigate/folder/")}update("mainDiv/"+f)}else{if(c.match("item/")){f=f.replace("/item/","/element/detail/");update(""+b+"/"+f)}if(c.match("folder/")){f=f.replace("/folder/","/groupSelectorPanel/selectGroup/");update("NoAnswer/"+f)}if(c.match("find/")){update("mainDiv/"+f)}}}}})}else{$(this).click(function(f){if(f.ctrlKey){window.open(c)}else{window.location.href=c}})}})}function resize_navigateMenu(){var a=$(".sf-navbar li.selected ul");if(a.height()!=null&&a.height()>0){$("#workZone").css("margin-top",a.height()-28)}}$(window).resize(resize_navigateMenu);navigateMenuTimerComeBackToSelected=null;doShowUserMenuUserNameTimer=null;doShowUserSubMenuUserNameTimer=null;myTimer=[0];var ctrlPressed=false;window.onmousedown=function(a){ctrlPressed=a.ctrlKey};function setListenerToNavigateMenu(){$("#navigateMenu li").click(function(a){if($(this).hasClass("with-ul")){if(!$(this).hasClass("selected")&&$("ul li:first a",this).length){$("ul li:first a",this).click()}}else{$.cookie("wigii_anchor",$("a",this).attr("href"),{path:"/"});if(a.ctrlKey){}else{$("#navigateMenu .selected").removeClass("selected");$(this).addClass("selected");refreshNavigateMenu();self.location=$("a",this).attr("href");updateThroughCache();clearTimeout(navigateMenuTimerComeBackToSelected)}a.stopPropagation()}}).bind("contextmenu",function(a){$.cookie("wigii_anchor",$("a",this).attr("href"),{path:"/"});a.stopPropagation()});$("#userMenu li.back").click(function(a){$("#navigateMenu a[href='#"+crtWigiiNamespaceUrl+"/"+crtModuleName+"']").click(a);return false});$("#userName").mouseenter(function(a){clearTimeout(doShowUserMenuUserNameTimer);doShowUserMenuUserNameTimer=setTimeout(function(){$("#userName").addClass("menuHover");$("#userName>ul, #userName>ul>li").css("visibility","visible")},250)}).mouseleave(function(a){clearTimeout(doShowUserMenuUserNameTimer);doShowUserMenuUserNameTimer=setTimeout(function(){$("#userName").removeClass("menuHover");$("#userName>ul, #userName>ul>li").css("visibility","hidden")},400)});$("#userName>ul>li").mouseenter(function(b){var a=$(window).height()-$(this).offset().top-$("#footerBar").outerHeight();$(this).children().last().css("max-height",a+"px");$("#userName>ul>li.subMenuHoverTemp").removeClass("subMenuHoverTemp");$(this).addClass("subMenuHoverTemp");clearTimeout(doShowUserSubMenuUserNameTimer);doShowUserSubMenuUserNameTimer=setTimeout(function(){$("#userName>ul>li.subMenuHover>ul, #userName>ul>li.subMenuHover>ul>li").css("visibility","hidden");$("#userName>ul>li.subMenuHover").removeClass("subMenuHover");$("#userName>ul>li.subMenuHoverTemp").addClass("subMenuHover");$("#userName>ul>li.subMenuHover ul, #userName>ul>li.subMenuHover>ul>li").css("visibility","visible")},400)}).mouseleave(function(a){clearTimeout(doShowUserSubMenuUserNameTimer);doShowUserSubMenuUserNameTimer=setTimeout(function(){$("#userName>ul>li.subMenuHover>ul, #userName>ul>li.subMenuHover>ul>li").css("visibility","hidden");$("#userName>ul>li.subMenuHover").removeClass("subMenuHover")},400)});$("#navigateMenu li.with-ul").on("mouseenter",function(){$(this).removeClass("delai-navbar");if(!$(this).hasClass("selected")){var e=$("#navigateMenu li.with-ul");var b=e.index(this);clearTimeout(myTimer[b]);for(var c=0,a=myTimer.length;c<a;c++){if(c!=b){myTimer[c]=null;e.eq(c).removeClass("delai-navbar")}}}}).on("mouseleave",function(){if(!$(this).hasClass("selected")){var b=$("#navigateMenu li.with-ul");var a=b.index(this);$(this).addClass("delai-navbar");myTimer[a]=setTimeout(function(){b.removeClass("delai-navbar")},400)}})}function addNavigationToMenu(e,a){var c=$("#"+e);var b=c.children().children().last();c.mouseenter(function(f){clearTimeout(a);a=setTimeout(function(){c.addClass("menuHover");b.css("visibility","visible")},150)}).mouseleave(function(f){clearTimeout(a);a=setTimeout(function(){c.removeClass("menuHover");c.find("ul").css("visibility","hidden")},400)});addNavigationToSubMenu(b.children(),a)}function addNavigationToSubMenu(b,a){b.mouseenter(function(j){var c=$(this);var g=c.children().last();var f=$(window).height()-g.offset().top-$("#footerBar").outerHeight();if(g.data("originHeight")===undefined){g.data("originHeight",g.height())}g.height(g.data("originHeight"));if(g.is("ul")&&f<g.outerHeight()){g.css({"max-height":f+"px","overflow-y":"auto","overflow-x":"hidden"})}else{g.css({"max-height":"","overflow-x":"","overflow-y":""})}c.parent().find(".subMenuHoverTemp").removeClass("subMenuHoverTemp");c.addClass("subMenuHoverTemp");clearTimeout(a);a=setTimeout(function(){if(g.is("ul")){b.find("ul").css("visibility","hidden");g.css({top:"0",visibility:"visible"})}else{b.find("ul").css("visibility","hidden")}},10)}).mouseleave(function(c){clearTimeout(a);a=setTimeout(function(){b.parent().find(".subMenuHoverTemp").removeClass("subMenuHoverTemp");b.find(".subMenuHover>ul").css("visibility","hidden");b.find(".subMenuHover").removeClass("subMenuHover")},400)}).click(function(){var c=$(this);c.addClass("S");b.parent().css("visibility","hidden")});b.each(function(e){var c=$(this).children().last();if(c.is("ul")){addNavigationToSubMenu(c.children(),a)}})}function enableDisableNavScroll(){NMOriginalOffset=$("#NMContainer").offset().left;NMFirst=$("#navigateMenu>li:first").offset().left-NMOriginalOffset;NMLast=$("#navigateMenu>li:last").offset().left-NMOriginalOffset+$("#navigateMenu>li:last").width();NMWidth=$("#NMContainer").width();if(NMFirst<=0){$("#navigationBar .navL").removeClass("D")}else{$("#navigationBar .navL").addClass("D")}if(NMLast>NMWidth){$("#navigationBar .navR").removeClass("D")}else{$("#navigationBar .navR").addClass("D")}}function timeToScrollBack(){NMOriginalOffset=$("#NMContainer").offset().left;NMWidth=$("#NMContainer").width();NMOffset=$("#navigateMenu>li.selected").offset().left-NMOriginalOffset;NMSelectedWidth=$("#navigateMenu>li.selected").width();NMFirstOffset=$("#navigateMenu>li:first").offset().left-NMOriginalOffset;NMLastOffset=$("#navigateMenu>li:last").offset().left-NMOriginalOffset+$("#navigateMenu>li:last").width();NMOffsetResult=0;if((NMOffset+NMSelectedWidth)>NMWidth){NMOffsetResult=-(NMOffset+NMSelectedWidth-NMWidth)-50}else{if(NMOffset<0){NMOffsetResult=-NMOffset+50}}if((NMFirstOffset+NMOffsetResult)>=0){NMOffsetResult=-NMFirstOffset}if(NMOffsetResult!=0){$("#navigateMenu").animate({marginLeft:"+="+(NMOffsetResult)},500,enableDisableNavScroll)}else{enableDisableNavScroll()}}function setNavigationBarInHomeState(a){if(arguments.length==0){a=false}$("#navigationBar .homeOnly").show();if(!crtWigiiNamespaceUrl||!crtModuleName){$("#userMenu li.back").hide()}$("#navigationBar .notHome").hide();$("nav #base-dropdown #dropdown-title").html('<span class="glyphicon glyphicon-menu-hamburger" aria-hidden="true"></span>');$("#navigationBarBsp #base-dropdown #dropdown-title").show();$("#navigationBarBsp .admin").hide();if(a){$("#userFeedbackOnSystem").show();$("#userFeedbackOnSystem").removeClass("disabled");$("#userFeedbackOnSystem a").removeClass("disabled")}else{$("#userFeedbackOnSystem").hide();$("#userFeedbackOnSystem a").addClass("disabled");$("#userFeedbackOnSystem").addClass("disabled")}closeStandardsDialogs();self.location="#Home";resize_navigateMenu()}function setNavigationBarInHomeStateBsp(a){if(arguments.length==0){a=false}$("#navigationBarBsp .homeOnly").show();$("#navigationBarBsp #base-dropdown #dropdown-title").show();$("#navToolBar #searchBar").remove();if(!crtWigiiNamespaceUrl||!crtModuleName){$("#navigationBarBsp li.back").hide()}$("#navigationBarBsp .notHome").hide();$("nav #base-dropdown #dropdown-title").html('<span class="glyphicon glyphicon-menu-hamburger" aria-hidden="true"></span>');$("#navigationBarBsp .admin").hide();if(a){$("#userFeedbackOnSystem").show();$("#userFeedbackOnSystem").removeClass("disabled");$("#userFeedbackOnSystem a").removeClass("disabled")}else{$("#userFeedbackOnSystem").hide();$("#userFeedbackOnSystem a").addClass("disabled");$("#userFeedbackOnSystem").addClass("disabled")}closeStandardsDialogs();self.location="#Home";resize_navigateMenu()}function setNavigationBarNotInHomeState(a){$("#navigationBar .admin").hide();$("#navigationBar .homeOnly").hide();$("#navigationBar .notHome").show();if(a){$("#userFeedbackOnSystem").show();$("#userFeedbackOnSystem").removeClass("disabled");$("#userFeedbackOnSystem a").removeClass("disabled")}else{$("#userFeedbackOnSystem").hide();$("#userFeedbackOnSystem a").addClass("disabled");$("#userFeedbackOnSystem").addClass("disabled")}self.location="#"+crtWigiiNamespaceUrl+"/"+crtModuleName;resize_navigateMenu()}function setNavigationBarNotInHomeStateBsp(a){var g=crtModuleName;var e=crtModuleLabel;var b=crtWigiiNamespaceUrl||null;var c=crtWigiiNamespaceLabel||b;var f=b.replace(/ /g,"-");$("#navigationBarBsp .admin").hide();$("#navigationBarBsp .carret-submenu").hide();$("nav .with-submenu").hide();$("#navigationBarBsp .home").show();$("#navigationBarBsp .carret").show();$("#navigationBarBsp #base-dropdown a:first").html(c+' <span class="caret"></span>');if($("nav #submenu-"+f+" a")){$("nav #submenu-"+f+" a:first").html(e+' <span class="caret"></span>');$("nav #submenu-"+f).show();$("#navigationBarBsp .carret-submenu").show()}$("nav #searchField").show(function(){$("#searchField input").focusin(function(){$("#searchField #goForSearch").css("background-color","#95C33B")});$("#searchField input").focusout(function(){$("#searchField #goForSearch").css("background-color","#d8d8d8")})});if(b==defaultWigiiNamespaceUrl){$("nav #submenu-"+f).hide();$("#navigationBarBsp .carret-submenu").hide();$("#navigationBarBsp #base-dropdown a:first").html(e+' <span class="caret"></span>')}if(a){$("#userFeedbackOnSystem").show();$("#userFeedbackOnSystem").removeClass("disabled");$("#userFeedbackOnSystem a").removeClass("disabled")}else{$("#userFeedbackOnSystem").hide();$("#userFeedbackOnSystem a").addClass("disabled");$("#userFeedbackOnSystem").addClass("disabled")}self.location="#"+crtWigiiNamespaceUrl+"/"+crtModuleName;resize_navigateMenu()}function setNavigationBarInAdminState(){$("#navigationBar .homeOnly").hide();$("#navigationBar .notHome").show();$("#userMenu .notHome").hide();$("#navigationBar .home").hide();$("#userFeedbackOnSystem").hide();$("#userFeedbackOnSystem a").addClass("disabled");$("#userFeedbackOnSystem").addClass("disabled");$("#navigationBar .admin").show()}function setNavigationBarInAdminStateBsp(){$(".with-submenu").hide();$("#searchField").hide();$("#searchBar").hide();$("#dropdown-title").hide();$("#navigationBarBsp .homeOnly").hide();$("#navigationBarBsp .notHome").hide();$("#navigationBarBsp .home").hide();$("#navigationBarBsp .carret").hide();$("#userFeedbackOnSystem").hide();$("#userMenuImport").hide();$("#userMenuUpdate").hide();$("#userMenuFindDuplicates").hide();$("#userMenuAddIndicators").hide();$("#userFeedbackOnSystem a").addClass("disabled");$("#userFeedbackOnSystem").addClass("disabled");$("#navigationBarBsp .admin").show();if(crtWigiiNamespaceUrl!="NoWigiiNamespace"){$("#navigationBarBsp #adminWigiiNamespace").html("Admin console: "+crtWigiiNamespaceUrl)}else{$("#navigationBarBsp #adminWigiiNamespace").html("Admin console: ")}}function refreshNavigateMenu(){$("#navigateMenu .selected").parentsUntil("#navigateMenu","li").addClass("selected");if($("#navigateMenu li.selected").length>1){$("#navigateMenu").addClass("with-sub")}else{$("#navigateMenu").removeClass("with-sub")}resize_navigateMenu()}function setListenerToHomePage(b){if(arguments.length<1){b="fromLeft"}$("#ContainerHome #homePageModuleMenu li, #ContainerHome #homePageWigiiNamespaceMenu li.sub").click(function(c){$("a",this).click()});$("#ContainerHome #homePageModuleMenu :not(.link) a, #ContainerHome #homePageWigiiNamespaceMenu .sub a").click(function(c){homePageClickRef=$(this).attr("href");homePageClickRef=homePageClickRef.replace(SITE_ROOT,"");if($(this).parent().hasClass("adminMenu")){$("#base-dropdown a[href$='"+homePageClickRef+"']").click()}else{$("#base-dropdown a[href$='"+homePageClickRef+"']").click()}self.location=homePageClickRef;c.stopPropagation()});var a=[];$("#ContainerHome #homePageWigiiNamespaceMenu li").mouseenter(function(){var e=this;if($("ul li",e).length>1){tempOffsetLow=null;if(b=="right"||b=="left"){tempOffsetLow=0}positionElementOnDom($("ul",e),$(e),b,tempOffsetLow,true);var c=$("#homePageWigiiNamespaceMenu .H.N").index(e);clearTimeout(a[c]);a[c]=setTimeout(function(){$("#homePageWigiiNamespaceMenu .H.N > ul").hide();$("ul",e).show()},100)}}).mouseleave(function(){var e=this;var c=$("#homePageWigiiNamespaceMenu .H.N").index(e);clearTimeout(a[c]);a[c]=setTimeout(function(){$("ul",e).hide()},400)}).click(function(c){if($("ul li:first a",this).length){$("ul li:first a",this).click()}else{if($("a:first",this).length){if(!ctrlPressed){self.location=$("a:first",this).attr("href")}else{$("#base-dropdown a[href$='"+$("a:first",this).attr("href")+"']").click()}}}}).bind("contextmenu",function(c){$.cookie("wigii_anchor",$("a",this).attr("href"),{path:"/"});c.stopPropagation()})}function selectLine(b,a){if(arguments.length<2){a=false}if(typeof(b)=="string"){obj=$("#"+b)}else{obj=$(b)}obj.parent().find("*").removeClass("selected");if(switchSelectionModeIsMultiple){if(obj.hasClass("readOnly")){$("#moduleView .title .onlyWriteRights").hide()}else{if(allMultipleSelectionHaveWriteRights){$("#moduleView .title .onlyWriteRights").show()}}if(a){obj.toggleClass("multipleSelected")}else{obj.addClass("multipleSelected")}}else{obj.parent().find("*").removeClass("multipleSelected");obj.addClass("selected")}matchContextMenu(obj)}switchSelectionModeIsMultiple=false;allMultipleSelectionHaveWriteRights=false;multipleSelectionNb=0;function setSelectionMode(a){if(arguments.length<1){a=switchSelectionModeIsMultiple}if(switchSelectionModeIsMultiple!=a){switchSelectionModeIsMultiple=a;if(switchSelectionModeIsMultiple){}else{crtMultipleSelectionDialogKeep=false;update("multipleDialog/"+crtWigiiNamespaceUrl+"/"+crtModuleName+"/element/stopMultipleSelection/");$("#moduleView .M").removeClass("M")}}if(switchSelectionModeIsMultiple){$("#moduleView div.toolBar>div.emailing").addClass("M");$("#moduleView div.toolBar>div.export").addClass("M")}else{$("#moduleView div.toolBar>div.emailing").removeClass("M");$("#moduleView div.toolBar>div.export").removeClass("M")}if($("#multipleDialog:visible").length>0){$("#multipleDialog .summary span.multipleSelectionNb").text(multipleSelectionNb);if(allMultipleSelectionHaveWriteRights){$("#multipleDialog div.onlyWriteRights").show()}else{$("#multipleDialog div.onlyWriteRights").hide()}if(multipleElementStatePerm&2){if(!(multipleEnableElementState&2048)){$("#multipleDialog div.organizeMultiple").hide()}$("#multipleDialog div.deleteMultiple").hide()}if(multipleEnableElementState&1024){$("#multipleDialog div.deleteMultiple").hide()}if(multipleElementStateRest&2){$("#multipleDialog div.editMultiple").hide()}if(multipleEnableElementState>0){if(multipleEnableElementState&1){s=$("#multipleDialog div.lockedMultiple");if(multipleElementState&1){s.addClass("checked").removeClass("unchecked").removeClass("mixed")}else{if(multipleElementStateMedi&1){s.addClass("mixed").removeClass("unchecked").removeClass("checked")}else{s.addClass("unchecked").removeClass("checked").removeClass("mixed")}}}else{$("#multipleDialog div.lockedMultiple").hide()}if(multipleEnableElementState&2){s=$("#multipleDialog div.blockedMultiple");if(multipleElementState&2){s.addClass("checked").removeClass("unchecked").removeClass("mixed")}else{if(multipleElementStateMedi&2){s.addClass("mixed").removeClass("unchecked").removeClass("checked")}else{s.addClass("unchecked").removeClass("checked").removeClass("mixed")}}}else{$("#multipleDialog div.blockedMultiple").hide()}if(multipleEnableElementState&4){s=$("#multipleDialog div.important1Multiple");if(multipleElementState&4){s.addClass("checked").removeClass("unchecked").removeClass("mixed")}else{if(multipleElementStateMedi&4){s.addClass("mixed").removeClass("unchecked").removeClass("checked")}else{s.addClass("unchecked").removeClass("checked").removeClass("mixed")}}}else{$("#multipleDialog div.important1Multiple").hide()}if(multipleEnableElementState&8){s=$("#multipleDialog div.important2Multiple");if(multipleElementState&8){s.addClass("checked").removeClass("unchecked").removeClass("mixed")}else{if(multipleElementStateMedi&8){s.addClass("mixed").removeClass("unchecked").removeClass("checked")}else{s.addClass("unchecked").removeClass("checked").removeClass("mixed")}}}else{$("#multipleDialog div.important2Multiple").hide()}if(multipleEnableElementState&16){s=$("#multipleDialog div.finalizedMultiple");if(multipleElementState&16){s.addClass("checked").removeClass("unchecked").removeClass("mixed")}else{if(multipleElementStateMedi&16){s.addClass("mixed").removeClass("unchecked").removeClass("checked")}else{s.addClass("unchecked").removeClass("checked").removeClass("mixed")}}}else{$("#multipleDialog div.finalizedMultiple").hide()}if(multipleEnableElementState&32){s=$("#multipleDialog div.approvedMultiple");if(multipleElementState&32){s.addClass("checked").removeClass("unchecked").removeClass("mixed")}else{if(multipleElementStateMedi&32){s.addClass("mixed").removeClass("unchecked").removeClass("checked")}else{s.addClass("unchecked").removeClass("checked").removeClass("mixed")}}}else{$("#multipleDialog div.approvedMultiple").hide()}if(multipleEnableElementState&64){s=$("#multipleDialog div.dismissedMultiple");if(multipleElementState&64){s.addClass("checked").removeClass("unchecked").removeClass("mixed")}else{if(multipleElementStateMedi&64){s.addClass("mixed").removeClass("unchecked").removeClass("checked")}else{s.addClass("unchecked").removeClass("checked").removeClass("mixed")}}}else{$("#multipleDialog div.dismissedMultiple").hide()}if(multipleEnableElementState&128){s=$("#multipleDialog div.archivedMultiple");if(multipleElementState&128){s.addClass("checked").removeClass("unchecked").removeClass("mixed")}else{if(multipleElementStateMedi&128){s.addClass("mixed").removeClass("unchecked").removeClass("checked")}else{s.addClass("unchecked").removeClass("checked").removeClass("mixed")}}}else{$("#multipleDialog div.archivedMultiple").hide()}if(multipleEnableElementState&256){s=$("#multipleDialog div.deprecatedMultiple");if(multipleElementState&256){s.addClass("checked").removeClass("unchecked").removeClass("mixed")}else{if(multipleElementStateMedi&256){s.addClass("mixed").removeClass("unchecked").removeClass("checked")}else{s.addClass("unchecked").removeClass("checked").removeClass("mixed")}}}else{$("#multipleDialog div.deprecatedMultiple").hide()}if(multipleEnableElementState&512){s=$("#multipleDialog div.hiddenMultiple");if(multipleElementState&512){s.addClass("checked").removeClass("unchecked").removeClass("mixed")}else{if(multipleElementStateMedi&512){s.addClass("mixed").removeClass("unchecked").removeClass("checked")}else{s.addClass("unchecked").removeClass("checked").removeClass("mixed")}}}else{$("#multipleDialog div.hiddenMultiple").hide()}}else{$("#multipleDialog div.elementStates").hide()}}else{if(switchSelectionModeIsMultiple){update("multipleDialog/"+crtWigiiNamespaceUrl+"/"+crtModuleName+"/element/displayMultipleDialog/")}}}function clickFolderLineInMultipleSelectionMode(a){a.toggleClass("M");invalidModuleViewCache();update("NoAnswer/"+crtWigiiNamespaceUrl+"/"+crtModuleName+"/element/setMultipleSelectionFolder/"+a.attr("id").split("_")[1]+"/"+a.hasClass("M"))}function clickLineInMultipleSelectionMode(a){a.toggleClass("M");invalidModuleViewCache();elEnableState=$(".menu .elEnableState",a).html();elState=$(".menu .elState",a).html();update("NoAnswer/"+crtWigiiNamespaceUrl+"/"+crtModuleName+"/element/setMultipleSelection/"+a.attr("id").split("_")[1]+"/"+a.hasClass("M")+"/"+!a.hasClass("readOnly")+"/"+elEnableState+"/"+elState)}function selectAllMultipleSelect(){if($("#groupPanel li.selected").length==0){groupId=0}else{groupId=$("#groupPanel li.selected").attr("id").split("_")[1]}$("#moduleView .el:has(.mul), #moduleView .folder:has(.mul)").addClass("M");invalidModuleViewCache();update("NoAnswer/"+crtWigiiNamespaceUrl+"/"+crtModuleName+"/element/setMultipleSelectionFolder/"+groupId+"/true")}function deselectAllMultipleSelect(){if($("#groupPanel li.selected").length==0){groupId=0}else{groupId=$("#groupPanel li.selected").attr("id").split("_")[1]}$("#moduleView .M").removeClass("M");invalidModuleViewCache();update("NoAnswer/"+crtWigiiNamespaceUrl+"/"+crtModuleName+"/element/setMultipleSelectionFolder/"+groupId+"/false")}function switchSelectionMode(){setSelectionMode(!switchSelectionModeIsMultiple)}function displayAudioPlayer(a){flowplayer(a,"flowplayer-3.2.11.swf",{plugins:{controls:{backgroundColor:"#696969",fullscreen:false,height:26,autoHide:false}},clip:{type:"audio",autoPlay:false}})}function displayVideoPlayer(a){flowplayer(a,"flowplayer-3.2.11.swf",{plugins:{controls:{backgroundColor:"#696969",fullscreen:true,autoHide:false}},clip:{scaling:"no",type:"video",autoPlay:false}})}function previewUnzipForViewing(b,a){update("elementPreview/"+b+"/unzipForViewing/")}function previewHtml(c,a,b){$.blockUI({css:{top:"5%",left:"3%",border:"none",width:"90%",height:"90%"},message:"<div class='ui-corner-all' style='position:absolute; top:3%px; left:101%; font-style:bold;font-size:10px;padding:5px 10px 5px 10px;cursor:pointer; background-color:#fff;' onclick='$.unblockUI();$(\"#fileDownloadingBar\").hide();' >X</div><iframe onload='$(\"#fileDownloadingBar\").hide();' style='height:100%;width:100%;'src='"+SITE_ROOT+"useContext/"+crtContextId+EXEC_requestSeparator+c.replace(SITE_ROOT,"")+(b?"/print?":"/integrated?")+a+"' >Your browser does not support iframes.</iframe>"});$(".blockOverlay").unbind("click").click($.unblockUI)}function previewIframe(a){$.blockUI({css:{top:"5%",left:"3%",border:"none",width:"90%",height:"90%"},message:"<div class='ui-corner-all' style='position:absolute; top:3%px; left:101%; font-style:bold;font-size:10px;padding:5px 10px 5px 10px;cursor:pointer; background-color:#fff;' onclick='$.unblockUI();' >X</div><iframe style='height:100%;width:100%;'src='"+a+"' >Your browser does not support iframes.</iframe>"});$(".blockOverlay").unbind("click").click($.unblockUI)}function previewImage(b,a){$.blockUI({css:{top:"10%",left:"10%",border:"none",width:"80%",height:"80%",background:"none"},message:"<img style='max-height:100%;max-width:100%;vertical-align:middle;' onload='$(\"#fileDownloadingBar\").hide();' src='"+SITE_ROOT+"useContext/"+crtContextId+EXEC_requestSeparator+b.replace(SITE_ROOT,"")+"?"+a+"' /><span class='ui-corner-all' style='position:absolute; font-style:bold;font-size:10px;padding:5px 10px 5px 10px;margin-left:5px;margin-top:0px;cursor:pointer; background-color:#fff;'  onclick='$.unblockUI(); $(\"#fileDownloadingBar\").hide();' >X</span>"});$(".blockOverlay").unbind("click").click($.unblockUI)}function setListenersToFiltersBsp(){$("nav input:first").change(function(){hideHelp();$(this).next().next().click()});$("nav #goForSearch").click(function(){setVis("busyDiv",true);setVis("filteringBar",true);url=SITE_ROOT+"Update/"+crtContextId+EXEC_requestSeparator+"filtersDialog/"+crtWigiiNamespaceUrl+"/"+crtModuleName+"/simpleFilters";var a=new jQuery.ajax({type:"POST",url:encodeURI(url),success:parseUpdateResult,cache:false,data:{action:"check",__textSearch_value:$(this).prev().prev().val()},error:errorOnUpdate})});$("nav #filtersButton").click(function(){update("filtersDialog/"+crtWigiiNamespaceUrl+"/"+crtModuleName+"/filters")});$("nav #removeFiltersButton").click(function(){$("nav input:first").val("");update("filtersDialog/"+crtWigiiNamespaceUrl+"/"+crtModuleName+"/removeFilters")})}function setListenersToFilters(){$("#workZone #searchBar input:first").change(function(){hideHelp();$(this).next().next().click()});$("#workZone #searchBar #goForSearch").click(function(){setVis("busyDiv",true);setVis("filteringBar",true);url=SITE_ROOT+"Update/"+crtContextId+EXEC_requestSeparator+"filtersDialog/"+crtWigiiNamespaceUrl+"/"+crtModuleName+"/simpleFilters";var a=new jQuery.ajax({type:"POST",url:encodeURI(url),success:parseUpdateResult,cache:false,data:{action:"check",__textSearch_value:$(this).prev().prev().val()},error:errorOnUpdate})});$("#workZone #searchBar #filtersButton").click(function(){update("filtersDialog/"+crtWigiiNamespaceUrl+"/"+crtModuleName+"/filters")});$("#workZone #searchBar #removeFiltersButton").click(function(){$("#workZone #searchBar input:first").val("");update("filtersDialog/"+crtWigiiNamespaceUrl+"/"+crtModuleName+"/removeFilters")})}function setFiltersButton(a){if(a){$("#filtersButton").removeClass("grayFont").addClass("R");$("#removeFiltersButton").removeClass("grayFont").addClass("R")}else{$("#removeFiltersButton").addClass("grayFont").removeClass("R");$("#filtersButton").addClass("grayFont").removeClass("R")}}function setListenersToCheckInOutFiles(f,e,c,k,j,a,g,b){if(f==""){f="mainDiv"}$("#"+c+".field .value .checkOutIn").click(function(l){$(this).after('<div class="SBB ui-corner-all" style="font-size:small;background-color:#fff;z-index:'+($(this).closest(".ui-dialog").css("zIndex")+1)+";top:"+(parseInt($(this).position().top)+parseInt($(this).outerHeight())+8)+"px; left:"+$(this).position().left+'px; padding:5px; position:absolute;" ><div style="font-size:small;">'+a+'</div><textarea style="width:300px;margin-top:5px; margin-bottom:5px;height:100px;" class=""></textarea><br /><input type="button" name="ok" value="'+g+'" /><input type="button" name="cancel" value="'+b+'" /></div>');autosize($(this).next().find(".elastic"));$(this).next().find("input:input:last").click(function(){$(this).parent().hide().remove()});$(this).next().find("input:input:first").click(function(){$(this).parent().hide();if(f!="mainDiv"){$(this).closest(".ui-dialog").find(".ui-icon-closethick").click();url=SITE_ROOT+"Update/"+crtContextId+EXEC_requestSeparator+"NoAnswer/"+crtWigiiNamespaceUrl+"/"+crtModuleName+"/"+j+"/"+e+"/"+k}else{url=SITE_ROOT+"Update/"+crtContextId+EXEC_requestSeparator+"mainDiv/"+crtWigiiNamespaceUrl+"/"+crtModuleName+"/"+j+"/"+e+"/"+k}if(j=="download/checkoutFile"){messageDownload(c);setTimeout(function(){setVis("fileDownloadingBar",false)},5000)}var m=new jQuery.ajax({type:"POST",url:encodeURI(url),success:parseUpdateResult,cache:false,data:{message:$(this).parent().find("textarea").val(),elementDialogId:f},error:errorOnUpdate})});l.stopPropagation()});if($("#"+f+" div.T div.el_edit").length==0||$("#"+c+".readOnly").length>0){$("#"+c+".field .value .checkOutIn").hide()}}function setListenerToMultipleDialog(f,j,e,c,k,g,b,a){$("#multipleDialog").prev().css("background-color","#FFE694");$("#multipleDialog").css("min-height","0px");$("#multipleDialog").parent().find(".ui-dialog-title").append($("#multipleDialog .toolBar .selectAll")).append($("#multipleDialog .toolBar .resetAll")).append($("#multipleDialog .toolBar .viewAll"));$("#multipleDialog").next().hide();if(f){emb=$("#multipleDialog .multipleExternalAccess");$(emb).click(function(){$(this).parent().find(".externalAccessMenu").remove();externalAccessMenuHtml='<span class="externalAccessMenu SBB ui-corner-all" style="font-weight:normal;background-color:#fff;top:'+(parseInt($(emb).position().top)+parseInt($(emb).outerHeight())-50)+"px; left:"+($(emb).position().left-50)+'px; padding:5px; position:absolute;" ><span style="width:380px;font-weight:bold;">'+f+"</span><br />";if(j){externalAccessMenuHtml+='<input type="radio" name="MultipleExternalAccessEmailManage" value="externalAccessMenuViewLink" /><span style="cursor:pointer;margin-top:-2px;" onclick="$(this).prev().click();">'+j+"</span><br />"}if(e){externalAccessMenuHtml+='<input type="radio" name="MultipleExternalAccessEmailManage" value="externalAccessMenuEditLink" /><span style="cursor:pointer;margin-top:-2px;" onclick="$(this).prev().click();">'+e+"</span><br />"}externalAccessMenuHtml+='<input type="radio" name="MultipleExternalAccessEmailManage" value="externalAccessMenuStop" /><span style="cursor:pointer;margin-top:-2px;" onclick="$(this).prev().click();">'+c+'</span><br /><span class="endDate" style="display:none;cursor:pointer;"><br /><span class="endDate" style="cursor:pointer;margin-right:5px;" onclick="$(this).next().focus();">'+k+'</span><input class="endDate" type="text" name="externalAccessEndDate" value="" /><br /></span><br /><input type="button" name="ok" disabled="on" value="'+g+'" /><input type="button" name="cancel" value="'+b+'" /></span>';$(this).after(externalAccessMenuHtml);$(this).next().find('input[type="radio"]').click(function(){$(this).attr("checked",true);$(this).parent().find('input[type="button"]:input[name="ok"]').removeAttr("disabled");showEndDate=false;switch($(this).val()){case"externalAccessMenuValidationLink":$(this).parent().find("span.stopAccess").remove();showEndDate=false;break;case"externalAccessMenuViewLink":$(this).parent().find("span.stopAccess").remove();showEndDate=true;break;case"externalAccessMenuEditLink":$(this).parent().find("span.stopAccess").remove();showEndDate=true;break;case"externalAccessMenuStop":$(this).parent().find('input[type="button"]:input[name="ok"]').before('<span class="stopAccess">'+a+"<br /><br /></span>");showEndDate=false;break}if(showEndDate){$(this).parent().find("input.endDate").datepicker({dateFormat:"dd.mm.yy",changeYear:true,firstDay:1,constrainInput:true,showOn:"button"}).width("75").click(function(){$(this).datepicker("hide")});$(this).parent().find(".endDate").show()}else{$(this).parent().find(".endDate").hide()}});$(this).next().find('input[type="button"]:input[name="cancel"]').click(function(){$(this).parent().hide().remove()});$(this).next().find('input[type="button"]:input[name="ok"]').click(function(){$(this).parent().hide();url=SITE_ROOT+"Update/"+crtContextId+EXEC_requestSeparator+"confirmationDialog/"+crtWigiiNamespaceUrl+"/"+crtModuleName+"/element/manageEmails/multiple";var l=new jQuery.ajax({type:"POST",url:encodeURI(url),success:parseUpdateResult,cache:false,data:{externalAction:$(this).parent().find("input:radio:checked").val(),externalEndDate:$(this).parent().find("input.endDate").val()},error:errorOnUpdate});$(this).parent().remove()})})}$("#multipleDialog div.elementStates div.onlyWriteRights").click(function(l){state=$(this).attr("href").replace("#","");if($(this).hasClass("unchecked")){$(this).addClass("checked").removeClass("unchecked");update("NoAnswer/"+crtWigiiNamespaceUrl+"/"+crtModuleName+"/setElementState/multiple/"+state+"/1")}else{if($(this).hasClass("checked")){$(this).addClass("unchecked").removeClass("checked");update("NoAnswer/"+crtWigiiNamespaceUrl+"/"+crtModuleName+"/setElementState/multiple/"+state+"/0")}else{if($(this).hasClass("mixed")){$(this).addClass("checked").removeClass("mixed");update("NoAnswer/"+crtWigiiNamespaceUrl+"/"+crtModuleName+"/setElementState/multiple/"+state+"/1")}}}l.stopPropagation()})}function popup_params(b,o){var n=typeof window.screenX!="undefined"?window.screenX:window.screenLeft;var e=typeof window.screenY!="undefined"?window.screenY:window.screenTop;var k=typeof window.outerWidth!="undefined"?window.outerWidth:document.documentElement.clientWidth;var l=typeof window.outerHeight!="undefined"?window.outerHeight:(document.documentElement.clientHeight-22);var j=(n<0)?window.screen.width+n:n;var c=parseInt(j+((k-b)/2),10);var m=parseInt(e+((l-o)/2.5),10);return"width="+b+",height="+o+",left="+c+",top="+m+",location=0,menubar=0,status=0,toolbar=0,scrollbars=1,resizable=1"}function setListenerToPreviewListLines(c,b,a,f,j){var e=f;var l=c;var g=a;var k="";if(j){k=":gt("+(j)+")"}if(g=="query"){$("#"+l+" tr:not(.loadNextLines)"+k).click(function(r){var o=$(this).attr("id").split("$$");var n=o[3];var m=o[4];var q=o[5];window.open(SITE_ROOT+"#"+n+"/"+m+"/item/"+q);r.stopPropagation()})}else{$("#"+l+" tr:not(.loadNextLines)"+k).click(function(q){var n=$(this).attr("id").split("$$");var m=n[1];var r=n[2];var o=n[3];self.location="#"+crtWigiiNamespaceUrl+"/"+crtModuleName+"/item/"+o;updateThroughCache("elementDialog",$(this).attr("href").replace("#",""),"elementDialog/"+crtWigiiNamespaceUrl+"/"+crtModuleName+"/element/detail/"+o);q.stopPropagation()});$("#"+l+" tr:not(.loadNextLines)"+k+" td.edit").click(function(q){var n=$(this).parent().attr("id").split("$$");var m=n[1];var r=n[2];var o=n[3];update("elementDialog/"+crtWigiiNamespaceUrl+"/"+crtModuleName+"/element/edit/"+o);q.stopPropagation()});$("#"+l+" tr:not(.loadNextLines)"+k+" td.delete").click(function(q){var n=$(this).parent().attr("id").split("$$");var m=n[1];var r=n[2];var o=n[3];update("elementDialog/"+crtWigiiNamespaceUrl+"/"+crtModuleName+"/element/detail/"+o+"/__/confirmationDialog/"+crtWigiiNamespaceUrl+"/"+crtModuleName+"/element/delete/"+o);q.stopPropagation()});$("#"+l+" tr:not(.loadNextLines)"+k+" td.restore").click(function(q){var n=$(this).parent().attr("id").split("$$");var m=n[1];var r=n[2];var o=n[3];update("confirmationDialog/"+crtWigiiNamespaceUrl+"/"+crtModuleName+"/element/restore/"+o,false,{action:"check"});q.stopPropagation()})}$("#"+l+" tr:not(.loadNextLines)"+k+" td:not(.delete, .restore, .edit)>div").mouseenter(function(m){showHelp(this,$(this).html(),30,"fromLeft",500,Math.max(200,$(this).width()),60000)}).mouseleave(function(m){hideHelp()})}function setListenerToAddSubItem(b,a,c){$("#"+b+" .addNewSubElement").click(function(f){update("elementDialog/"+crtWigiiNamespaceUrl+"/"+crtModuleName+"/subelement/add/"+a+"/"+c);f.stopPropagation()})}function setListenerToPreviewList(k,j,e,c,l,a){var g=l;var n=e;var b=k;var f=j;var m=a;$("#"+n).prev().find(".H:first").click(function(o){$("#"+n).toggle();o.stopPropagation()});setListenerToPreviewListLines(n,c,m,g,null);$("#"+n+" tr.loadNextLines").click(function(t){var q=parseInt($(".totalItems",this).text());var o=parseInt($(".pageSize",this).text());var u=parseInt($(".nbItem",this).text());url=crtWigiiNamespaceUrl+"/"+crtModuleName+"/getNextElementInPreviewList/"+b+"/"+f;url=SITE_ROOT+"useContext/"+crtContextId+EXEC_requestSeparator+url;setVis("busyDiv",true);var r=new jQuery.ajax({type:"POST",url:encodeURI(url),cache:false,data:{page:(u/o)+1,elementId:k,previewListId:n},success:function(v,y){setVis("busyDiv",false);data=v.split("_X_NBNEWROWS_X_");nbLoaded=parseInt(data[1]);nbTot=parseInt(data[2]);data=data[0];$("#"+n+" tr.loadNextLines").before(data);if(t.which||(!t.which&&u==0)){$("#"+n+" tr.loadNextLines .nbItem").html(u+nbLoaded)}$("#"+n+" tr.loadNextLines .totalItems").html(nbTot);setListenerToPreviewListLines(n,c,m,g,u);if((u+nbLoaded)>=nbTot){$("#"+n+" tr.loadNextLines>td>font").hide()}else{$("#"+n+" tr.loadNextLines>td>font").show()}if(__cacheJS&&__cacheJS.elementDialog&&__cacheJS.elementDialog[currentElementDialogViewCacheKey]&&t.which){var x="$(document).ready(function(){$('#"+n+" tr.loadNextLines').click();$('#"+n+" tr.loadNextLines .nbItem').html("+(u+nbLoaded)+"); ";if((u+nbLoaded)>=nbTot){x+="$('#"+n+" tr.loadNextLines>td>font').hide();"}x+="});";__cacheJS.elementDialog[currentElementDialogViewCacheKey]=__cacheJS.elementDialog[currentElementDialogViewCacheKey]+x}},error:errorOnUpdate});onUpdateErrorCounter=0;t.stopPropagation()});$("#"+n+" .refresh").click(function(q){if(__cacheJS&&__cacheJS.elementDialog&&__cacheJS.elementDialog[currentElementDialogViewCacheKey]){var r="(\\$\\(document\\)\\.ready\\([\\s]*function\\(\\)[\\s]*\\{[\\w\\s\\n\\r$()'#.;]*(?:value[\\s]*tr\\.loadNextLines\\'\\)\\.click\\(\\);){1}[\\w\\s\\n\\r$()'#.;]*\\}\\);)";r=r.replace("value",n);var o=new RegExp(r,"gmi");__cacheJS.elementDialog[currentElementDialogViewCacheKey]=__cacheJS.elementDialog[currentElementDialogViewCacheKey].replace(o,"")}$("#"+n+" tr:not(.loadNextLines, .header)").remove();$("#"+n+" tr.loadNextLines .nbItem").html(0);$("#"+n+" tr.loadNextLines").click();q.stopPropagation();return false});if(m=="query"){$("#"+n).prev().find(".linkTypeQuery").html("("+$("#"+n+" tr.loadNextLines .totalItems").text()+")")}}elementCalendar_currentEventSelected=null;elementCalendar_contextMenuIdElement=null;lastResizeOrDragRevertFunction=null;lastModifiedEvent=null;function setListenersToCalendar(groupUpId,groupUpLabel,crtLanguage,crtView,crtDate,callbackOnEventFetch){var cmSelector="#moduleView .calendar>.cm";var elSelector="#moduleView .dataZone a.fc-event";$("#moduleView .calendar").fullCalendar({locale:crtLanguage,defaultView:crtView,defaultDate:crtDate,slotLabelFormat:"H:mm",header:{left:"prev,next today",center:"title",right:"month,agendaWeek,listWeek"},businessHours:{dow:[1,2,3,4,5],start:"08:00",end:"17:00",},views:{month:{columnHeaderFormat:"ddd",titleFormat:"MMMM YYYY",timeFormat:"H:mm",displayEventTime:true,displayEventEnd:true},agendaWeek:{columnHeaderFormat:"ddd DD MMM",titleFormat:"DD MMM YYYY",timeFormat:"H:mm",displayEventTime:true,displayEventEnd:true}},lazyFetching:false,timezone:false,height:$("#moduleView").height()-parseInt($("#moduleView .calendar").css("margin-top"),10),firstDay:1,editable:calendarIsEditable,eventDragStart:function(event,jsEvent,ui,view){},eventResizeStart:function(event,jsEvent,ui,view){},eventDrop:function(event,delta,revertFunc,jsEvent,ui,view){if($(this).hasClass("readOnly")){revertFunc()}else{start=event.start;end=event.end;allDay=event.allDay;if(end==null){end=start.add(1,"day")}if(allDay||!end.hasTime()||end.format("HH:mm:mm")=="00:00:00"){end.subtract(1,"second")}lastResizeOrDragRevertFunction=revertFunc;update("elementDialog/"+crtWigiiNamespaceUrl+"/"+crtModuleName+"/element/edit/"+event.id+"/"+start.format("YYYY-MM-DD HH:mm")+"/"+end.format("YYYY-MM-DD HH:mm")+"/"+allDay)}},eventResize:function(event,delta,revertFunc,jsEvent,ui,view){if((event.className+"").search("readOnly")!=-1){revertFunc()}else{start=event.start;end=event.end;allDay=event.allDay;if(end==null){end=start.add(1,"day")}if(allDay||!end.hasTime()||end.format("HH:mm:mm")=="00:00:00"){end.subtract(1,"second")}lastResizeOrDragRevertFunction=revertFunc;update("elementDialog/"+crtWigiiNamespaceUrl+"/"+crtModuleName+"/element/edit/"+event.id+"/"+start.format("YYYY-MM-DD HH:mm")+"/"+end.format("YYYY-MM-DD HH:mm")+"/"+allDay)}},eventAfterRender:function(event,element,view){colorize()},selectable:calendarIsEditable,selectHelper:true,select:function(start,end,jsEvent){allDay=!start.hasTime();if(allDay||!end.hasTime()||end.format("HH:mm:mm")=="00:00:00"){end.subtract(1,"second")}update("elementDialog/"+crtWigiiNamespaceUrl+"/"+crtModuleName+"/element/add/"+$("#groupPanel li.selected").attr("id").split("_")[1]+"/"+start.format("YYYY-MM-DD HH:mm")+"/"+end.format("YYYY-MM-DD HH:mm")+"/"+allDay)},events:function(start,end,timezone,callback){crtView=$("#moduleView .calendar").fullCalendar("getView").name;crtDate=$("#moduleView .calendar").fullCalendar("getDate");$.ajax({url:encodeURI(SITE_ROOT+"useContext/"+crtContextId+EXEC_requestSeparator+crtWigiiNamespaceUrl+"/"+crtModuleName+"/getCalendarEvents/"+start.unix()+"/"+end.unix()+"/"+crtView+"/"+crtDate.unix()),dataType:"text",cache:false,error:errorOnUpdate,success:function(events){events=eval(events);if(events.length>0){firstEvent=events[0];if(!(moment(firstEvent.end).unix()>=start.unix()&&moment(firstEvent.start).unix()<=end.unix())){$("#moduleView .calendar").fullCalendar("gotoDate",firstEvent.start)}}if(callbackOnEventFetch){callbackOnEventFetch()}callback(events)}})},eventRender:function(event,element){element.find(".fc-event-title").html(event.title);element.unbind("contextmenu");element.bind("contextmenu",function(e){if(e.which==3){hideHelp();$(this).closest(elSelector).addClass("over");$("#moduleView .calendar .S").removeClass("S");$("#moduleView .calendar div.over").addClass("S");positionElementOnMouse($(cmSelector),e,"fromRight",null,5);elEnableState=$("0");elState=$("0");if($(cmSelector+" > div.idSelect").length){$(cmSelector+" > div.idSelect").attr("id",event.id)}else{$(cmSelector).append('<div class="idSelect" id="'+event.id+'" style="display: none;"></div>')}if(event.editable=="false"){$(cmSelector+" div.write").hide()}else{$(cmSelector+" div.write").show()}if($("#moduleView .toolBar .addNewElement.disabledBg").length>0){$(cmSelector+" #cm_addElementInList").hide()}else{$(cmSelector+" #cm_addElementInList").show()}if(elState&2){$(cmSelector+" #cm_edit").hide();$(cmSelector+" #cm_delete").hide();$(cmSelector+" #cm_organize").hide()}$(cmSelector).show();e.stopPropagation();return false}})},loading:function(isLoading,view){setVis("busyDiv",isLoading)},eventClick:function(calEvent,jsEvent,view){clickEvent_elementCalendar(this,calEvent,jsEvent,view,crtWigiiNamespaceUrl,crtModuleName)},eventMouseover:function(calEvent,jsEvent,view){elementCalendar_contextMenuIdElement=calEvent.id;hideHelp();showHelp(this,calEvent.description,30,"fromCenter",200,200,5000,jsEvent)}});if(groupUpId!==""){$("#moduleView .calendar .fc-header-left").append('<span class="folderUp L H" >'+groupUpLabel+"</span>");$("#moduleView .calendar span.folderUp").click(function(e){$("#groupPanel #group_"+groupUpId).click();e.stopPropagation()})}$(cmSelector).mouseleave(function(){$(elSelector).removeClass("over");$(this).hide()});$(cmSelector).click(function(){$(elSelector).removeClass("over");$(this).hide()});$(cmSelector+">div").unbind();$(cmSelector+">div").click(function(e){if($(this).attr("id")=="cm_exit"){return true}if($(this).attr("id")=="cm_open"){$(elSelector+".over").click();return true}idItem=$(cmSelector+" > div.idSelect").attr("id");if($(this).attr("id")=="cm_addElementInList"){$("#searchBar .toolbarBox .addNewElement").click();return true}if($(this).hasClass("unchecked")){checked=1;$(this).removeClass("unchecked").addClass("checked")}else{if($(this).hasClass("checked")){checked=0;$(this).removeClass("checked").addClass("unchecked")}else{checked=-1}}if($(this).attr("id")=="cm_edit"){update("elementDialog/"+crtWigiiNamespaceUrl+"/"+crtModuleName+"/element/edit/"+idItem);return true}if($(this).attr("id")=="cm_delete"){update("elementDialog/"+crtWigiiNamespaceUrl+"/"+crtModuleName+"/element/delete/"+idItem+"/elementDialog");return true}if($(this).attr("id")=="cm_copy"){copyWithOrganize("elementDialog/"+crtWigiiNamespaceUrl+"/"+crtModuleName,idItem);return true}if($(this).attr("id")=="cm_organize"){openOrganizeDialog(idItem);return true}e.stopPropagation()})}function resize_calendar(){if($("#moduleView .calendar").length>0){$("#moduleView .calendar").height($("#groupPanel").height()-parseInt($("#moduleView .calendar").css("margin-top"),10)-$("#moduleView .toolBar").height());if($("#moduleView .calendar .fc-view-container").length>0){$("#moduleView .calendar").fullCalendar("option","height",$("#moduleView .calendar").height()-3)}}}function selectEvent_elementCalendar(){if(switchSelectionModeIsMultiple){$("#moduleView .calendar div.over").addClass("M")}else{$("#moduleView .calendar .S").removeClass("S");$("#moduleView .calendar div.over").addClass("S")}elementCalendar_currentEventSelected=elementCalendar_contextMenuIdElement}function clickEvent_elementCalendar(c,g,b,a,f,e){if(switchSelectionModeIsMultiple){$(c).addClass("M")}else{$("#moduleView .calendar .S").removeClass("S");$(c).addClass("S")}elementCalendar_currentEventSelected=g.id;if(!switchSelectionModeIsMultiple){update("elementDialog/"+f+"/"+e+"/element/detail/"+elementCalendar_currentEventSelected)}}var crtBlogViewNbOfColumns=2;var crtBlogViewItemWidth=false;function resize_blog(){if($("#moduleView .blog").length>0){var b=$("#moduleView").width();var c=Math.floor((b-6-10)/crtBlogViewNbOfColumns);var a=$(window).height()-$("#moduleView>div.blog .dataBlog").position().top-fb.outerHeight()-3-$("#moduleView #indicators").height();c=c-42-2;if(crtBlogViewItemWidth){c=crtBlogViewItemWidth}if(a<0){$("#moduleView").width($("#moduleView").width()-1);var a=$(window).height()-$("#moduleView>div.blog .dataBlog").position().top-fb.outerHeight()-3-$("#moduleView #indicators").height()}$("#moduleView>div.blog div.el:not(.max)").width(c);$("#moduleView>div.blog .dataBlog").height(a)}}function resize_wncd(){if($("#moduleView div.dataZone.wncd").length>0){$("#moduleView div.dataZone.wncd").height($("#groupPanel").height()-parseInt($("#moduleView div.dataZone.wncd").css("margin-top"),10)-$("#moduleView #indicators").height()-$("#moduleView .toolBar").height())}}function normalizeWheelSpeed(b){var c;if(b.wheelDelta){c=(b.wheelDelta%120-0)==-0?b.wheelDelta/120:b.wheelDelta/12}else{var a=b.deltaY?b.deltaY:b.detail;c=-(a%3?a*10:a/3)}return c}function getElementDialogScrollHeight(c,b){var a=window.innerHeight;if(b.prop("id")=="scrollElement"){a=a-b.parent().parent().offset().top}else{a=a-b.parent().offset().top}switch(c){case"neighbour":a-=b.prev().outerHeight(true);if(b.next().hasClass("scrollGradient")){a-=b.next().next().outerHeight(true)}else{a-=b.next().outerHeight(true)}break;case"children":a-=b.parent().prev().outerHeight(true);a-=b.parent().children().first().outerHeight(true);break}return(a-30)}(function(a){a.fn.hasScrollBar=function(){return this.get(0).scrollHeight>this.height()}})(jQuery);function addScrollWithShadow(j,e){if(isWorkzoneViewDocked()){return true}if(!$("#"+j).hasScrollBar()){return true}if(arguments.length<2){e=0}function c(n,m){for(var l in m){if(m[l]!="na"){n.css(l,m[l])}}}function b(l){l.unbind("scroll");l.scroll(function(){var m=$(this);if(m.next().hasClass("scrollGradient")){m.next().css("display",((m.scrollTop()+m.outerHeight()>=this.scrollHeight)?"none":"block"))}})}function a(o,m){if(o.next().hasClass("scrollGradient")){return}var n='<div class="scrollGradient" style="';for(var l in m){n+=l+":"+m[l]+";"}n+='"></div>';o.after(n)}var k=$("#"+j);var g=j;if(jQuery.inArray(j,["elementDialog","emailingDialog","filtersDialog","activityDialog"])>-1){g=((k.find("div.T").length==0)?"neighbour":"children")}var f={height:"na","overflow-x":"hidden","overflow-y":"auto","margin-right":"na"};switch(g){case"neighbour":if(k.parent().outerHeight(true)>window.innerHeight||k.prop("scrollHeight")>k.prop("clientHeight")){f.height=getElementDialogScrollHeight(g,k);c(k,f);b(k);a(k,{bottom:(k.next().outerHeight(true)-7)+"px"});k.next().css({display:"block"})}else{k.css("overflow","visible")}break;case"children":if(k.parent().outerHeight(true)>window.innerHeight){k=$("#scrollElement");f.height=getElementDialogScrollHeight(g,k);f["margin-right"]="-7px";c(k,f);b(k);a(k,{bottom:"0px"});k.next().css({display:"block"})}else{$("#scrollElement").css("overflow","visible")}break}k.scrollTop(e);if(k.next().hasClass("scrollGradient")){k.next().unbind("mouseenter DOMMouseScroll mousewheel");k.next().mouseenter(function(){k.animate({scrollTop:(k.scrollTop()+40)},750)}).bind("DOMMouseScroll mousewheel",function(l){k.scrollTop(k.scrollTop()+(-normalizeWheelSpeed(l.originalEvent)*10))})}}function resize_scrollArea(b){if(arguments.length<1){b=false}if(isWorkzoneViewDocked()&&!crtModuleName=="Admin"){return true}var f=["elementDialog","emailingDialog","filtersDialog","activityDialog"];var e=null;var a="elementDialog";var c=0;$.each(f,function(l,m){var k=$("#"+m);if(k.children().length>0){e=k;a=m}});if(e!=null&&e.parent().prop("tagName").toLowerCase()!="body"){if(b){c=((e.find("#scrollElement").length==1)?e.find("#scrollElement").scrollTop():e.scrollTop())}var g=((e.find("div.T").length==0)?"neighbour":"children");if(g=="neighbour"){var j=e.css("height");e.css("height","");if(e.next().hasClass("scrollGradient")){e.next().css("display","none")}}else{$("#scrollElement").css("height","").next().css("display","none")}addScrollWithShadow(a,c);if(isWorkzoneViewDocked()){e.css("height",j)}}}function manageWorkzoneViewDocked(f,c){if(arguments.length<1){f="show"}if(arguments.length<2){c=1000}var e=$("#elementDialog"),m=$("#moduleView"),g=$("#dockingContainer>.collapse"),k=$("#scrollElement"),o=$(".dataBlog"),j=$(".el.S");if(k.length==0){e.append('<div id="scrollElement"></div>');k=$("#scrollElement").append(e.find("form"))}k.width(c);switch(f){case"show":c+=20;e.css({display:"block","float":"left",width:c+"px"});g.css("display","block");m.css({"float":"left"});if($("#moduleView:hidden").length){g.find("span").html("&raquo;")}else{g.find("span").html("&laquo;")}$(".firstBox, .toolbarBox","#searchBar").css("display","none");$("#elementDialog > .T").css("background-color","#f1f3f7");$("#elementDialog > .T").css("margin-top","-40px");$("#elementDialog > .T").css("width","100%");$("#elementDialog > .T").css("z-index","1000");$("#elementDialog > .T").attr("id","searchBar");$("#elementDialog").css("padding-top","50px");if($("#validateButton").length!=0){var l=$("#validateButton").html();$("#elementDialog").prepend('<div id="validTop">'+l+"</div>");$("#elementDialog #validTop").css("height","60px");$("#elementDialog #validTop").css("margin-top","-60px");$("#elementDialog #validTop").css("width","100%");$("#elementDialog #validTop").css("background-color","#fff");$("#elementDialog #validTop").css("border-bottom","2px solid #bbb");$("#elementDialog #validTop").css("z-index","1000");$("#validTop .ok").click(function(q){$("#scrollElement form").submit()});$("#validTop .cancel").click(function(){$("form .cancel").click()})}e.scrollTop(0);break;case"clear":e.html("");case"hide":e.css("display","none").css("float","none");$("#dockingContainer>.collapse").css("display","none");$("#moduleView").css({"float":"none"});$(".firstBox, .toolbarBox","#searchBar").css("display","block");$("#searchBar .middleBox").css("display","none");if($("#groupPanel").length){$("#groupPanel li>div.highlight").removeClass("highlight")}break}resize_elementList();if(j.length>0){o.scrollTop(0);var a=j.position().top;var b=$("#NMContainerBsp").height();var n=$(".toolBar").height();o.scrollTop(a-b-n-10)}}function initMiddleBox(c){if(arguments.length<1){c=false}var b=$("#searchBar .middleBox");var e=$("#searchBar .firstBox");if(!c&&b.length>0){b.remove()}b=$("#searchBar .middleBox");if(b.length==0){e.after('<div class="middleBox"></div>');b=$("#searchBar .middleBox")}if(b.find("div.T").length==0){b.append('<div class="T docked"></div>')}var a=$("#searchBar .firstBox").height();return $("#searchBar .middleBox").css("height","auto")};